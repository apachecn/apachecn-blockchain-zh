# åœ¨ä»¥å¤ªåŠä¸Šç¼–ç ä½ è‡ªå·±çš„åŠ å¯†è´§å¸(å¦‚ä½•å»ºç«‹ä¸€ä¸ª ERC-20 ä»£å¸å’Œå¤§ä¼—é”€å”®ç½‘ç«™)

> åŸæ–‡ï¼š<https://www.dappuniversity.com/articles/code-your-own-cryptocurrency-on-ethereum>

ä½œè€…æ ¼é›·æˆˆé‡ŒÂ·éº¦å¡å®¾2022 å¹´ 12 æœˆ 1 æ—¥

å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯æ¥è‡ª [Dapp å¤§å­¦çš„](https://www.youtube.com/c/DappUniversity)[Gregory](https://www.twitter.com/DappUniversity)ï¼

ä»Šå¤©æˆ‘å°†å‘ä½ å±•ç¤ºå¦‚ä½•åœ¨ä»¥å¤ªåŠåŒºå—é“¾ä¸Šç¼–ç ä½ è‡ªå·±çš„åŠ å¯†è´§å¸å¹¶å‡ºå”®å®ƒï¼æˆ‘å°†å‘æ‚¨å±•ç¤ºå¦‚ä½•ä½¿ç”¨ä»¥å¤ªåŠæ™ºèƒ½åˆçº¦åˆ›å»ºè‡ªå·±çš„ ERC-20 ä»¤ç‰Œå¹¶é€æ­¥è¿›è¡Œæ‰¹é‡é”€å”®ï¼Œå¦‚ä½•æµ‹è¯•æ™ºèƒ½åˆçº¦ï¼Œå¦‚ä½•å°†æ™ºèƒ½åˆçº¦éƒ¨ç½²åˆ°ä»¥å¤ªåŠåŒºå—é“¾ï¼Œä»¥åŠå¦‚ä½•æ„å»ºéƒ¨ç½²åˆ° web çš„ ICO ç½‘ç«™ã€‚æˆ‘è¿˜å°†è§£é‡Šä»€ä¹ˆæ˜¯ ERC-20 ä»£å¸ï¼Œä»¥å¤ªåŠä»£å¸å¦‚ä½•å·¥ä½œï¼Œåˆå§‹ç¡¬å¸å‘è¡Œ(ICO)å¦‚ä½•å·¥ä½œã€‚

[https://www.youtube.com/embed/XdKv5uwEk5A](https://www.youtube.com/embed/XdKv5uwEk5A)

[*JOIN MY FREE TRAINING!*](/bootcamp) *

ä½ å¯ä»¥åœ¨ä¸Šé¢çš„ 8 å°æ—¶æ•™ç¨‹è§†é¢‘ä¸­è§‚çœ‹æˆ‘åˆ¶ä½œ ERC-20 ä»£å¸å’Œäººç¾¤é”€å”®ã€‚åœ¨æœ¬æ•™ç¨‹ä¸­ï¼Œæˆ‘è¿˜å°†é€æ­¥æŒ‡å¯¼æ‚¨ã€‚ä½ å¯ä»¥ä» github [è¿™é‡Œ](https://github.com/dappuniversity/token_sale)ä¸‹è½½æœ¬æ•™ç¨‹çš„å®Œæ•´æºä»£ç ã€‚åœ¨æˆ‘ä»¬å¼€å§‹å»ºç«‹ ERC-20 ä»£å¸å’Œäººç¾¤é”€å”®ä¹‹å‰ï¼Œæˆ‘å…ˆå›ç­”å‡ ä¸ªé—®é¢˜ã€‚

ä½ ä¹Ÿå¯ä»¥åœ¨è¿™é‡Œå…è´¹ä¸‹è½½å®Œæ•´çš„ 8 å°æ—¶è§†é¢‘ç³»åˆ—[çš„æ‰€æœ‰è§†é¢‘å†…å®¹ğŸ‰ã€‚](/free-download)

## ä»€ä¹ˆæ˜¯ ERC 20 ä»£å¸ï¼Ÿ

ä»¥å¤ªåŠåŒºå—é“¾å…è®¸æ‚¨åˆ›å»ºè‡ªå·±çš„åŠ å¯†è´§å¸æˆ–ä»£å¸ï¼Œå¯ä»¥ç”¨ä»¥å¤ªâ€”â€”åŒºå—é“¾ä»¥å¤ªåŠçš„æœ¬åœ°åŠ å¯†è´§å¸â€”â€”è´­ä¹°ã€‚ERC-20 åªæ˜¯ä¸€ä¸ªæ ‡å‡†ï¼Œå®ƒè§„å®šäº†è¿™äº›ä»¤ç‰Œçš„è¡Œä¸ºæ–¹å¼ï¼Œå› æ­¤å®ƒä»¬ä¸åŠ å¯†è´§å¸äº¤æ˜“æ‰€ç­‰å…¶ä»–å¹³å°å…¼å®¹ã€‚

é™¤äº†é˜…è¯»æœ¬æ–‡ï¼Œæ‚¨è¿˜å¯ä»¥è§‚çœ‹ä¸‹é¢çš„è§†é¢‘ï¼Œäº†è§£ ERC-20 ä»¤ç‰Œå¦‚ä½•å·¥ä½œçš„æ›´å¤šä¿¡æ¯ã€‚

[https://www.youtube.com/embed/7GXqgMZpefc](https://www.youtube.com/embed/7GXqgMZpefc)

é‚£ä¹ˆè¿™æ˜¯æ€ä¹ˆåšåˆ°çš„å‘¢ï¼Ÿå¥½å§ï¼Œè®©æˆ‘ä»¬å…ˆæ¥çœ‹çœ‹ä»¥å¤ªåŠåŒºå—é“¾æ˜¯å¦‚ä½•è¿ä½œçš„ã€‚

ä»¥å¤ªåŠå°±åƒæ¯”ç‰¹å¸ä¸€æ ·æ˜¯åŒºå—é“¾ã€‚åƒæ¯”ç‰¹å¸ä¸€æ ·ï¼Œä»¥å¤ªåŠä¸ºæ‹¥æœ‰ä»¥å¤ªåŠçš„æœ¬åœ°åŠ å¯†è´§å¸ä»¥å¤ªçš„äººè®°å½•è´¦æˆ·ä½™é¢ã€‚ä¸æ¯”ç‰¹å¸ä¸åŒï¼Œä»¥å¤ªåŠä¹Ÿæ˜¯ä¸€ä¸ªå¹³å°ï¼Œå…è®¸ä½ åˆ›å»ºè‡ªå·±çš„ä»¤ç‰Œï¼Œè€Œæ— éœ€åˆ›å»ºæ–°çš„åŒºå—é“¾ã€‚

æ‚¨å¯ä»¥ä½¿ç”¨æ™ºèƒ½åˆçº¦åˆ›å»ºä»¥å¤ªåŠä»¤ç‰Œã€‚ERC-20 æ˜¯ä¸€ç§æ ‡å‡†ï¼Œå®ƒè§„å®šäº†è¿™ç§ä»¤ç‰Œæ™ºèƒ½åˆçº¦åº”è¯¥å¦‚ä½•å·¥ä½œã€‚

è®©æˆ‘ä»¬ç”¨ä¸€ä¸ªä¾‹å­æ¥ç†è§£ ERC-20 ä»¤ç‰Œæ™ºèƒ½åˆçº¦æ˜¯å¦‚ä½•å·¥ä½œçš„ã€‚å‡è®¾æˆ‘ä»¬æƒ³è¦åˆ›å»ºä¸€ä¸ªåä¸ºâ€œæˆ‘çš„ä»¤ç‰Œâ€çš„ä»¤ç‰Œï¼Œå…¶ç¬¦å·ä¸ºâ€œMTK â€,å¹¶ä¸”å°†ä¼šæœ‰ 100ï¼Œ000ï¼Œ000 ä¸ªè¿™æ ·çš„ä»¤ç‰Œå­˜åœ¨ã€‚

![ERC-20 Token Example](img/2f769685c50a4e9b5c38f42180db5d5c.png)

é¦–å…ˆï¼Œä»¤ç‰Œæ™ºèƒ½åˆçº¦è·Ÿè¸ªä¸€äº›åŸºæœ¬ä»¤ç‰Œå±æ€§ã€‚ä¾‹å¦‚ï¼Œå®ƒè®°å½•äº†â€œæˆ‘çš„ä»£å¸â€è¿™ä¸ªåç§°ï¼Œä½ åœ¨åŠ å¯†è´§å¸äº¤æ˜“æ‰€çœ‹åˆ°çš„ç¬¦å·ï¼Œä»¥åŠæ€»å…±å­˜åœ¨å¤šå°‘ä»£å¸ã€‚

å®ƒè¿˜è®°å½•è°æ‹¥æœ‰â€œæˆ‘çš„ä»¤ç‰Œâ€ä»¥åŠæ‹¥æœ‰å¤šå°‘ã€‚

ERC-20 ä»£å¸å¯ä»¥ä»ä¸€ä¸ªè´¦æˆ·è½¬ç§»åˆ°å¦ä¸€ä¸ªè´¦æˆ·ä½œä¸ºæ”¯ä»˜ï¼Œå°±åƒä»»ä½•å…¶ä»–åŠ å¯†è´§å¸ä¸€æ ·ã€‚

å®ƒä»¬ä¹Ÿå¯ä»¥åœ¨å¤§ä¼—é”€å”®ä¸­è´­ä¹°ï¼Œæ¯”å¦‚ ICOï¼Œæˆ‘ä»¬å°†åœ¨ä¸‹ä¸€èŠ‚ä¸­å¯¹æ­¤è¿›è¡Œæ¢è®¨ã€‚

å®ƒä»¬ä¹Ÿå¯ä»¥åœ¨åŠ å¯†è´§å¸äº¤æ˜“æ‰€ä¹°å–ã€‚

![ICO Checklist](img/95c68f609ec9b11ad0f66f8d4efcc8e8.png)

#### ICO æˆåŠŸæ¸…å•

ä½ æ˜¯å¦è¯•å›¾æ‰¾å‡ºä½ éœ€è¦ä»€ä¹ˆæ¥æ¨å‡ºä½ çš„ ICOï¼Ÿç‚¹å‡»ä¸‹é¢çš„é“¾æ¥è·å–æˆ‘çš„ ICO æˆåŠŸæ¸…å•ï¼

[Get Checklist](/ico-checklist)

## ç¾¤ä½“é”€å”®(ICO)æ˜¯å¦‚ä½•è¿ä½œçš„

ERC-20 ä»£å¸å¯ä»¥ä»¥å¤šç§æ–¹å¼åˆ†å‘ã€‚ä¸€ç§æµè¡Œçš„æ–¹æ³•æ˜¯ä¸¾è¡Œä¸€æ¬¡é›†ä½“é”€å”®ï¼Œæˆ–é¦–æ¬¡å‘è¡Œç¡¬å¸(ICO)ã€‚å¤§ä¼—é”€å”®æ˜¯ä¸€ç§å…¬å¸é€šè¿‡åˆ›é€ è‡ªå·±çš„ ERC-20 ä»£å¸æ¥ç­¹é›†èµ„é‡‘çš„æ–¹å¼ï¼ŒæŠ•èµ„è€…å¯ä»¥é€šè¿‡ä»¥å¤ªç½‘è´­ä¹°è¿™äº›ä»£å¸ã€‚

é™¤äº†é˜…è¯»æœ¬æ–‡ï¼Œä½ è¿˜å¯ä»¥è§‚çœ‹ä¸‹é¢çš„è§†é¢‘ï¼Œäº†è§£æ›´å¤šå…³äºäººç¾¤é”€å”®çš„ä¿¡æ¯ã€‚

[https://www.youtube.com/embed/E9M7oeBDGfY](https://www.youtube.com/embed/E9M7oeBDGfY)

æ¯å½“å‘ç”Ÿä¼—ç­¹é”€å”®æ—¶ï¼Œè¯¥å…¬å¸å°±ä¼šè·å¾—ç”±æŠ•èµ„è€…æ”¯ä»˜çš„ä¹™é†šå½¢å¼çš„æµåŠ¨èµ„æœ¬ï¼Œå¹¶æŒæœ‰åœ¨ä¼—ç­¹é”€å”®ä¸­å‡ºå”®çš„ä¿ç•™æ•°é‡çš„ ERC-20 ä»£å¸ã€‚

ä¸ºäº†å‚ä¸ä¼—ç­¹é”€å”®ï¼ŒæŠ•èµ„è€…å¿…é¡»ä½¿ç”¨å¸æˆ·è¿æ¥åˆ°ä»¥å¤ªåŒºå—é“¾ã€‚è¿™ä¸ªå¸æˆ·æœ‰ä¸€ä¸ªå¯ä»¥å­˜å‚¨ä¹™é†šçš„é’±åŒ…åœ°å€ï¼Œä»¥åŠåœ¨å¤§æ‹å–ä¸­è´­ä¹°çš„ ERC-20 ä»£å¸ã€‚

æŠ•èµ„è€…å¿…é¡»è®¿é—®ä¸€ä¸ªä¸æ™ºèƒ½åˆçº¦å¯¹è¯çš„å¤§ä¼—é”€å”®ç½‘ç«™ã€‚æ™ºèƒ½åˆåŒç®¡ç†ç€æ‰€æœ‰å…³äºå¤§ä¼—é”€å”®å¦‚ä½•è¿ä½œçš„è§„åˆ™ã€‚

æ¯å½“æŠ•èµ„è€…åœ¨ä¼—åŒ…é”€å”®ç½‘ç«™ä¸Šè´­ä¹°ä»£å¸æ—¶ï¼Œä»–ä»¬éƒ½ä¼šå°†é’±åŒ…ä¸­çš„ä¹™é†šå‘é€åˆ°æ™ºèƒ½åˆçº¦ï¼Œæ™ºèƒ½åˆçº¦ä¼šç«‹å³å°†è´­ä¹°çš„ä»£å¸åˆ†é…åˆ°ä»–ä»¬çš„é’±åŒ…ä¸­ã€‚

æ™ºèƒ½åˆåŒè®¾å®šäº†é›†ä½“é”€å”®ä¸­ä»£å¸çš„ä»·æ ¼ï¼Œå¹¶æ§åˆ¶äº†é›†ä½“é”€å”®çš„è¡Œä¸ºæ–¹å¼ã€‚

äººç¾¤é”€å”®å¯ä»¥é‡‡å–å„ç§å½¢å¼å’Œè§„æ¨¡ã€‚å®ƒä»¬å¯ä»¥æœ‰å¤šä¸ªå±‚çº§æˆ–é˜¶æ®µï¼Œå¦‚é¢„ ICOã€ICO å’Œ ICO å¥–é‡‘é˜¶æ®µã€‚è¿™äº›å±‚ä¸­çš„æ¯ä¸€å±‚éƒ½å¯èƒ½å‘ç”Ÿåœ¨ä¸åŒçš„æ—¶é—´ç‚¹ï¼Œå¹¶ä¸”å¯èƒ½è¡¨ç°ä¸åŒã€‚

ä»–ä»¬ä¹Ÿå¯ä»¥æœ‰ç™½åå•æ¥é™åˆ¶å“ªäº›æŠ•èµ„è€…å¯ä»¥è´­ä¹°ä»£å¸ã€‚

ä»–ä»¬è¿˜å¯ä»¥ä¿ç•™ä¸€å®šæ•°é‡çš„ä»£å¸ï¼Œè¿™äº›ä»£å¸ä¸ä¼šåœ¨å¤§æ‹å–ä¸­å‡ºå”®ã€‚è¿™äº›å‚¨å¤‡é€šå¸¸æ˜¯ç•™ç»™æ¯ä¸ªå…¬å¸çš„ç‰¹å®šæˆå‘˜ï¼Œå¦‚åˆ›å§‹äººå’Œé¡¾é—®ã€‚è¿™äº›å‚¨å¤‡å¯ä»¥æ˜¯å›ºå®šæ•°é‡çš„ä»£å¸æˆ–ç™¾åˆ†æ¯”ã€‚

æ— è®ºä½•æ—¶ç¾¤ä½“é”€å”®ç»“æŸï¼Œéƒ½å¯ä»¥ç”±ç®¡ç†å‘˜æ¥å®Œæˆã€‚æ¯å½“è¿™ç§æƒ…å†µå‘ç”Ÿæ—¶ï¼Œæ‰€æœ‰é¢„ç•™çš„ä»£å¸éƒ½å°†è¢«åˆ†é…åˆ°ç›¸åº”çš„å¸æˆ·ï¼Œå¤§è§„æ¨¡é”€å”®å°†æ­£å¼ç»“æŸã€‚

## ERC-20 ä»£å¸å¦‚ä½•å·¥ä½œ

æ­£å¦‚æˆ‘å‰é¢è§£é‡Šçš„ï¼ŒERC-20 ä»¤ç‰Œæ˜¯ç”¨ä»¥å¤ªåŠæ™ºèƒ½åˆçº¦åˆ›å»ºçš„ã€‚é‚£ä¹ˆä»€ä¹ˆæ˜¯æ™ºèƒ½åˆçº¦å‘¢ï¼Ÿ

ä»¥å¤ªåŠå…è®¸å¼€å‘äººå‘˜ä½¿ç”¨æ™ºèƒ½åˆçº¦ç¼–å†™åœ¨åŒºå—é“¾ä¸Šè¿è¡Œçš„åº”ç”¨ç¨‹åºï¼Œæ™ºèƒ½åˆçº¦å°è£…äº†è¿™äº›åº”ç”¨ç¨‹åºçš„æ‰€æœ‰ä¸šåŠ¡é€»è¾‘ã€‚å®ƒä»¬ä½¿æˆ‘ä»¬èƒ½å¤Ÿå‘åŒºå—é“¾è¯»å†™æ•°æ®ï¼Œä»¥åŠæ‰§è¡Œä»£ç ã€‚æ™ºèƒ½è”ç³»äººæ˜¯ç”¨ä¸€ç§å«åš [Solidity](https://solidity.readthedocs.io/en/v0.4.21/) çš„ç¼–ç¨‹è¯­è¨€ç¼–å†™çš„ï¼Œçœ‹èµ·æ¥å¾ˆåƒ Javascriptã€‚å®ƒæ˜¯ä¸€ç§æˆç†Ÿçš„ç¼–ç¨‹è¯­è¨€ï¼Œå…è®¸æˆ‘ä»¬åšè®¸å¤š Javascript èƒ½åšçš„ç›¸åŒç±»å‹çš„äº‹æƒ…ï¼Œä½†ç”±äºå®ƒçš„ç”¨ä¾‹ï¼Œå®ƒçš„è¡Œä¸ºæœ‰ç‚¹ä¸åŒï¼Œæ­£å¦‚æˆ‘ä»¬å°†åœ¨æœ¬æ•™ç¨‹ä¸­çœ‹åˆ°çš„ã€‚

åœ¨ ERC-20 ä»¤ç‰Œçš„æƒ…å†µä¸‹ï¼Œæ™ºèƒ½åˆçº¦ç®¡ç†å…³äºä»¤ç‰Œå¦‚ä½•å·¥ä½œçš„æ‰€æœ‰è¡Œä¸ºï¼Œå¹¶è·Ÿè¸ªä»¤ç‰Œæ‰€æœ‰æƒå’Œå¸æˆ·ä½™é¢ã€‚

ERC-20 æ˜¯ä¸€ä¸ªå…³äºä»¥å¤ªåŠä»¤ç‰Œåº”è¯¥å¦‚ä½•æ„å»ºçš„ API è§„èŒƒã€‚è¿™æ˜¯ä¸€ä¸ªç¤¾åŒºé‡‡ç”¨çš„æ ‡å‡†ï¼Œå…è®¸åœ¨å„ç§ä½¿ç”¨æƒ…å†µä¸‹æ”¯æŒä»¤ç‰Œã€‚æˆ‘ä»¬å¸Œæœ›æ„å»ºä¸€ä¸ªç¬¦åˆè¯¥æ ‡å‡†çš„ä»¤ç‰Œï¼Œä»¥ä¾¿å®ƒèƒ½å¤Ÿè¢«å¹¿æ³›æ¥å—ã€‚å¦‚æœæˆ‘ä»¬æ²¡æœ‰è¿™æ ·çš„æ ‡å‡†ï¼Œæˆ‘ä»¬å¯èƒ½æœ‰æ— æ•°çš„æ–¹æ³•æ¥åˆ›å»ºä»¤ç‰Œï¼Œå¹¶ä¸”å®ƒä»¬å¯èƒ½å½¼æ­¤ä¸å…¼å®¹ï¼

ä½¿ç”¨ ERC-20 æ ‡å‡†å¯ç¡®ä¿ä»¤ç‰Œç¬¦åˆä»¥ä¸‹(åŠæ›´å¤š)ä½¿ç”¨æƒ…å½¢:

*   é’±åŒ…è½¬ç§»-å°†ä»£å¸ä»ä¸€ä¸ªå¸æˆ·è½¬ç§»åˆ°å¦ä¸€ä¸ªå¸æˆ·
*   åŠ å¯†è´§å¸äº¤æ˜“æ‰€çš„ä¹°å–
*   åƒæˆ‘ä»¬å°†åœ¨æœ¬æ•™ç¨‹ä¸­æ¼”ç¤ºçš„é‚£æ ·ï¼Œåœ¨å¤§è§„æ¨¡é”€å”®(ICO)ä¸­è´­ä¹°ä»£å¸

ERC-20 è§„èŒƒæœ¬è´¨ä¸Šè§„å®šäº†æ™ºèƒ½åˆçº¦å¿…é¡»å“åº”çš„æ¥å£ã€‚å®ƒæŒ‡å®šäº†æ™ºèƒ½åˆçº¦çš„ç»“æ„å’Œæ™ºèƒ½åˆçº¦å¿…é¡»å…·æœ‰çš„åŠŸèƒ½ç±»å‹ã€‚å®ƒè¿˜æä¾›äº†ä¸€äº›å»ºè®®çš„å‡½æ•°ï¼Œè¿™äº›å‡½æ•°å¾ˆå¥½ï¼Œä½†æœ€ç»ˆæ˜¯å¯é€‰çš„ã€‚å®ƒè§„å®šäº†æˆ‘ä»¬çš„ä»¤ç‰Œå¿…é¡»å…·æœ‰çš„æŸäº›äº‹ä»¶ï¼Œæ¯”å¦‚ä¸€ä¸ª`transfer`äº‹ä»¶ã€‚çœ‹ï¼Œæ™ºèƒ½åˆçº¦å¯ä»¥å‘å‡ºæ¶ˆè´¹è€…å¯ä»¥è®¢é˜…çš„äº‹ä»¶ï¼Œæœ‰äº†è¿™ä¸ªæ ‡å‡†ï¼Œæˆ‘ä»¬å¯ä»¥è®¢é˜…å‘Šè¯‰æˆ‘ä»¬ä»¤ç‰Œä½•æ—¶å”®å‡ºçš„äº‹ä»¶ã€‚

ä¸‹é¢æ˜¯ ERC-20 æ ‡å‡†æŒ‡å®šçš„`transfer`å‡½æ•°çš„ä¸€ä¸ªç¤ºä¾‹å®ç°ã€‚å®ƒæ˜¯æ™ºèƒ½åˆçº¦æ‰€è¦æ±‚çš„ï¼Œå¹¶æ§åˆ¶äººä»¬å¦‚ä½•ä»è‡ªå·±çš„é’±åŒ…å‘ä»–äººå‘é€ ERC-20 ä»¤ç‰Œã€‚

```js
contract ERC20Token {
    // ...

    function transfer(address _to, uint256 _value) public returns (bool success) {
        require(balanceOf[msg.sender] >= _value);

        balanceOf[msg.sender] -= _value;
        balanceOf[_to] += _value;

        Transfer(msg.sender, _to, _value);

        return true;
    }

    // ...
}

```

è¯¥å‡½æ•°é€šè¿‡ä»¥ä¸‹æ–¹å¼å®ç° ERC-20 æ ‡å‡†:

*   å‡½æ•°å­˜åœ¨ã€‚
*   å®ƒæ¥å—æ­£ç¡®çš„å‚æ•°ã€‚
*   å¦‚æœç”¨æˆ·æ²¡æœ‰è¶³å¤Ÿçš„ä»¤ç‰Œæ¥è½¬ç§»ï¼Œå³ä½™é¢ä¸è¶³ï¼Œåˆ™å¤±è´¥ã€‚
*   å®ƒå°†å‘é€æ–¹è´¦æˆ·çš„ä½™é¢è½¬ç§»åˆ°æ¥æ”¶æ–¹è´¦æˆ·ã€‚
*   å®ƒè§¦å‘äº†ä¸€ä¸ª`sell`äº‹ä»¶ã€‚
*   å®ƒè¿”å›æ­£ç¡®çš„å€¼ï¼Œä¾‹å¦‚`true`ã€‚

å¦‚æœè¿™ä¸€åˆ‡è¿˜æ²¡æœ‰å®Œå…¨è¯´å¾—é€šï¼Œè¯·ä¸è¦æ‹…å¿ƒã€‚æˆ‘å°†åœ¨é€æ­¥è§†é¢‘æ•™ç¨‹ä¸­æ„å»º ERC-20 ä»¤ç‰Œæ—¶è¯¦ç»†è§£é‡Šæ‰€æœ‰è¿™äº›éƒ¨åˆ†ã€‚

ä½ å¯ä»¥ç›´æ¥åœ¨[ä»¥å¤ªåŠæ”¹è¿›ææ¡ˆ](https://github.com/ethereum/EIPs) github çŸ¥è¯†åº“ä¸Š[é˜…è¯»æ›´å¤šå…³äº ERC-20 ä»¤ç‰Œæ ‡å‡†](https://github.com/ethereum/EIPs/blob/master/EIPS/eip-20.md)çš„ä¿¡æ¯ã€‚è¿™æ˜¯æ‰€æœ‰å›´ç»•ä»¥å¤ªåŠæ ‡å‡†çš„ç¤¾åŒºè®¨è®ºå‘ç”Ÿçš„åœ°æ–¹ã€‚æˆ‘å¼ºçƒˆæ¨èå°†è¿™ä¸ªåº“åŠ å…¥ä¹¦ç­¾å¹¶é€šè¯»æäº¤çš„å†…å®¹ï¼Œå› ä¸ºåœ¨è¿™é‡Œä½ å¯ä»¥å®æ—¶è§‚å¯Ÿä»¥å¤ªåŠæŠ€æœ¯çš„å‘å±•å’Œå˜åŒ–ï¼

æˆ‘ä¹Ÿæ¨è[è¿™ç¯‡ç»´åŸºç™¾ç§‘æ–‡ç« ](https://en.wikipedia.org/wiki/ERC20)ã€‚

## è¿™æ˜¯æˆ‘ä»¬è¦å»ºé€ çš„

![Crowd Sale Website Demo](img/bf15570bd9e0d58ebd4b2ef9dd421322.png)

æˆ‘ä»¬å°†å»ºç«‹ä¸€ä¸ª ICO ç½‘ç«™ï¼Œè¯¥ç½‘ç«™å°†ä¸åŒºå—é“¾ä¸Šçš„å¤§ä¼—é”€å”®æ™ºèƒ½åˆåŒè¿›è¡Œå¯¹è¯ã€‚è¿™ä¸ªå®¢æˆ·ç«¯ç½‘ç«™å°†æœ‰ä¸€ä¸ªç”¨æˆ·å¯ä»¥åœ¨ä¼—åŒ…é”€å”®ä¸­è´­ä¹°ä»£å¸çš„å½¢å¼ã€‚å®ƒå°†æ˜¾ç¤ºé›†ä½“é”€å”®çš„è¿›åº¦ï¼Œå¦‚ç”¨æˆ·è´­ä¹°äº†å¤šå°‘ä»¤ç‰Œï¼Œæ‰€æœ‰ç”¨æˆ·è´­ä¹°äº†å¤šå°‘ä»¤ç‰Œï¼Œä»¥åŠé›†ä½“é”€å”®ä¸­å¯ç”¨çš„ä»¤ç‰Œæ€»æ•°ã€‚å®ƒè¿˜ä¼šåœ¨â€œæ‚¨çš„å¸æˆ·â€ä¸‹æ˜¾ç¤ºæˆ‘ä»¬è¿æ¥åˆ°åŒºå—é“¾çš„å¸æˆ·ã€‚

## å®‰è£…ä¾èµ–é¡¹

ä¸ºäº†å»ºç«‹æˆ‘ä»¬çš„ ERC-20 ä»£å¸å’Œäººç¾¤é”€å”®ï¼Œæˆ‘ä»¬éœ€è¦ä¸€äº›ä¾èµ–ç¬¬ä¸€ã€‚

### èŠ‚ç‚¹ç¨‹åºåŒ…ç®¡ç†å™¨(NPM)

æˆ‘ä»¬éœ€è¦çš„ç¬¬ä¸€ä¸ªä¾èµ–é¡¹æ˜¯ Node.js é™„å¸¦çš„[èŠ‚ç‚¹åŒ…ç®¡ç†å™¨](https://nodejs.org/en/)æˆ– NPMã€‚æ‚¨å¯ä»¥æŸ¥çœ‹æ˜¯å¦å·²ç»å®‰è£…äº† Nodeï¼Œæ–¹æ³•æ˜¯è½¬åˆ°æ‚¨çš„ç»ˆç«¯å¹¶é”®å…¥:

```js
$ node -v
```

### å—èŒæ¡†æ¶

ä¸‹ä¸€ä¸ªä¾èµ–é¡¹æ˜¯ [Truffle æ¡†æ¶](http://truffleframework.com/)ï¼Œå®ƒå…è®¸æˆ‘ä»¬åœ¨ä»¥å¤ªåŠåŒºå—é“¾ä¸Šæ„å»ºå»ä¸­å¿ƒåŒ–çš„åº”ç”¨ç¨‹åºã€‚å®ƒæä¾›äº†ä¸€å¥—å·¥å…·ï¼Œå…è®¸æˆ‘ä»¬ç”¨ Solidity ç¼–ç¨‹è¯­è¨€ç¼–å†™æ™ºèƒ½è”ç³»äººã€‚å®ƒè¿˜ä½¿æˆ‘ä»¬èƒ½å¤Ÿæµ‹è¯•æˆ‘ä»¬çš„æ™ºèƒ½åˆåŒï¼Œå¹¶å°†å…¶éƒ¨ç½²åˆ°åŒºå—é“¾ã€‚å®ƒè¿˜ä¸ºæˆ‘ä»¬æä¾›äº†ä¸€ä¸ªå¼€å‘å®¢æˆ·ç«¯åº”ç”¨ç¨‹åºçš„åœ°æ–¹ã€‚

æ‚¨å¯ä»¥åœ¨å‘½ä»¤è¡Œä¸­å®‰è£… NPM æ¾éœ²ï¼Œå¦‚ä¸‹æ‰€ç¤º:

```js
$ npm install -g truffle
```

### åŠ çº³åˆ‡

ä¸‹ä¸€ä¸ªä¾èµ–é¡¹æ˜¯ [Ganache](http://truffleframework.com/ganache) ï¼Œä¸€ä¸ªæœ¬åœ°å†…å­˜ä¸­çš„åŒºå—é“¾ã€‚ä½ å¯ä»¥é€šè¿‡[ä»æ¾éœ²æ¡†æ¶ç½‘ç«™](http://truffleframework.com/ganache)ä¸‹è½½å®‰è£… Ganacheã€‚å®ƒä¼šç»™æˆ‘ä»¬ 10 ä¸ªå¤–éƒ¨å¸æˆ·çš„åœ°å€åœ¨æˆ‘ä»¬å½“åœ°çš„ä»¥å¤ªåŠåŒºå—é“¾ã€‚æ¯ä¸ªè´¦æˆ·éƒ½é¢„è£…äº† 100 ä¸ªå‡ä¹™é†šã€‚

### Metamask

ä¸‹ä¸€ä¸ªä¾èµ–é¡¹æ˜¯ Google Chrome çš„[å…ƒæ©ç æ‰©å±•ã€‚ä¸ºäº†ä½¿ç”¨åŒºå—é“¾ï¼Œæˆ‘ä»¬å¿…é¡»è¿æ¥åˆ°å®ƒ(è®°ä½ï¼Œæˆ‘è¯´è¿‡åŒºå—é“¾**æ˜¯**ç½‘ç»œ)ã€‚ä¸ºäº†ä½¿ç”¨ä»¥å¤ªåŠåŒºå—é“¾ï¼Œæˆ‘ä»¬å¿…é¡»å®‰è£…ä¸€ä¸ªç‰¹æ®Šçš„æµè§ˆå™¨æ‰©å±•ã€‚è¿™å°±æ˜¯ metamask çš„ç”¨æ­¦ä¹‹åœ°ã€‚æˆ‘ä»¬å°†èƒ½å¤Ÿç”¨æˆ‘ä»¬çš„ä¸ªäººè´¦æˆ·è¿æ¥åˆ°æˆ‘ä»¬å½“åœ°çš„ä»¥å¤ªåŠåŒºå—é“¾ï¼Œå¹¶ä¸æˆ‘ä»¬çš„æ™ºèƒ½åˆçº¦è¿›è¡Œäº¤äº’ã€‚](https://chrome.google.com/webstore/detail/metamask/nkbihfbeogaeaoehlefnkodbefgpgknn?hl=en)

åœ¨æœ¬æ•™ç¨‹ä¸­ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ Metamask chrome æ‰©å±•ï¼Œæ‰€ä»¥å¦‚æœä½ è¿˜æ²¡æœ‰è°·æ­Œ chrome æµè§ˆå™¨ï¼Œä½ ä¹Ÿéœ€è¦å®‰è£…å®ƒã€‚è¦å®‰è£… Metamaskï¼Œè¯·åœ¨ Google Chrome ç½‘ç»œå•†åº—ä¸­æœç´¢ Metamask Chrome æ’ä»¶ã€‚ä¸€æ—¦ä½ å®‰è£…äº†å®ƒï¼Œç¡®ä¿å®ƒåœ¨ä½ çš„æ‰©å±•åˆ—è¡¨ä¸­è¢«é€‰ä¸­ã€‚å®‰è£… Chrome æµè§ˆå™¨åï¼Œä½ ä¼šåœ¨æµè§ˆå™¨çš„å³ä¸Šè§’çœ‹åˆ°ç‹ç‹¸å›¾æ ‡ã€‚å¦‚æœé‡åˆ°å›°éš¾ï¼Œè¯·å‚è€ƒè§†é¢‘æ¼”ç¤ºï¼

### è¯­æ³•çªå‡ºæ˜¾ç¤º

ä¾èµ–é¡¹æ˜¯å¯é€‰çš„ï¼Œä½†æ˜¯æ¨èä½¿ç”¨ã€‚æˆ‘å»ºè®®ä¸º [Solidity](https://solidity.readthedocs.io/en/v0.4.21/) ç¼–ç¨‹è¯­è¨€å®‰è£…è¯­æ³•é«˜äº®ã€‚å¤§å¤šæ•°æ–‡æœ¬ç¼–è¾‘å™¨å’Œ ide æ²¡æœ‰çªå‡ºæ˜¾ç¤ºè¯­æ³•çš„åŠŸèƒ½ï¼Œæ‰€ä»¥ä½ å¿…é¡»å®‰è£…ä¸€ä¸ªåŒ…æ¥æ”¯æŒå®ƒã€‚æˆ‘æ­£åœ¨ä½¿ç”¨[å´‡é«˜æ–‡æœ¬](https://www.sublimetext.com/)ï¼Œå¹¶ä¸”æˆ‘å·²ç»ä¸‹è½½äº†[â€œä»¥å¤ªåŠâ€è½¯ä»¶åŒ…](https://packagecontrol.io/packages/Ethereum)ï¼Œå®ƒæä¾›äº†å¾ˆå¥½çš„è¯­æ³•é«˜äº®æ˜¾ç¤ºä»¥ä¿è¯å¯é æ€§ã€‚

## ERC-20 ä»¤ç‰Œæ™ºèƒ½åˆçº¦

è¿™éƒ¨åˆ†æ•™ç¨‹çš„è§†é¢‘ç‰‡æ®µä»[è¿™ä¸ªè§†é¢‘](https://www.youtube.com/watch?v=jfFgecLL8UA)å¼€å§‹ã€‚ä½ å¯ä»¥ä» github [è¿™é‡Œ](https://github.com/dappuniversity/token_sale)ä¸‹è½½è¿™ä¸ªæ™ºèƒ½åˆçº¦çš„ä»£ç ã€‚

ç°åœ¨æˆ‘ä»¬å·²ç»å®‰è£…äº†ä¾èµ–é¡¹ï¼Œè®©æˆ‘ä»¬å¼€å§‹æ„å»ºæˆ‘ä»¬çš„ ERC-20 ä»¤ç‰Œå§ï¼ä»¥ä¸‹æ˜¯å®Œæ•´çš„ ERC-20 ä»¤ç‰Œæ™ºèƒ½åˆçº¦å¯é æ€§ä»£ç :

```js
pragma solidity ^0.4.2;

contract DappToken {
    string  public name = "DApp Token";
    string  public symbol = "DAPP";
    string  public standard = "DApp Token v1.0";
    uint256 public totalSupply;

    event Transfer(
        address indexed _from,
        address indexed _to,
        uint256 _value
    );

    event Approval(
        address indexed _owner,
        address indexed _spender,
        uint256 _value
    );

    mapping(address => uint256) public balanceOf;
    mapping(address => mapping(address => uint256)) public allowance;

    function DappToken (uint256 _initialSupply) public {
        balanceOf[msg.sender] = _initialSupply;
        totalSupply = _initialSupply;
    }

    function transfer(address _to, uint256 _value) public returns (bool success) {
        require(balanceOf[msg.sender] >= _value);

        balanceOf[msg.sender] -= _value;
        balanceOf[_to] += _value;

        Transfer(msg.sender, _to, _value);

        return true;
    }

    function approve(address _spender, uint256 _value) public returns (bool success) {
        allowance[msg.sender][_spender] = _value;

        Approval(msg.sender, _spender, _value);

        return true;
    }

    function transferFrom(address _from, address _to, uint256 _value) public returns (bool success) {
        require(_value <= balanceOf[_from]);
        require(_value <= allowance[_from][msg.sender]);

        balanceOf[_from] -= _value;
        balanceOf[_to] += _value;

        allowance[_from][msg.sender] -= _value;

        Transfer(_from, _to, _value);

        return true;
    }
}

```

è®©æˆ‘ä»¬æ¥çœ‹çœ‹è¿™ä¸ªæ™ºèƒ½åˆçº¦åšäº†ä»€ä¹ˆï¼Œä»¥åŠå®ƒæ˜¯å¦‚ä½•å®ç° ERC-20 æ ‡å‡†çš„:

*   å®ƒå­˜å‚¨äº†ä»¤ç‰Œå`string public name = "DApp Token"`ã€‚
*   å®ƒå­˜å‚¨åŠ å¯†è´§å¸äº¤æ˜“çš„ä»¤ç‰Œç¬¦å·`string public symbol = "DAPP"`ã€‚
*   å®ƒå­˜å‚¨ç°æœ‰ä»¤ç‰Œçš„æ€»ä¾›åº”é‡`uint256 public totalSupply`ã€‚
*   å®ƒä½¿ç”¨å¯é æ€§æ˜ å°„æ¥å­˜å‚¨æ‹¥æœ‰ä»¤ç‰Œ`mapping(address => uint256) public balanceOf`çš„æ¯ä¸ªå¸æˆ·çš„ä½™é¢ã€‚
*   å®ƒå®ç°äº†ä¸€ä¸ª`transfer`åŠŸèƒ½ï¼Œå…è®¸ç”¨æˆ·å‘å¦ä¸€ä¸ªå¸æˆ·å‘é€ä»¤ç‰Œã€‚
*   å®ƒå®ç°äº†ä¸€ä¸ª`approve`åŠŸèƒ½ï¼Œå…è®¸å¦ä¸€ä¸ªè´¦æˆ·ä½¿ç”¨ä»£å¸ï¼Œå°±åƒåœ¨åŠ å¯†è´§å¸äº¤æ˜“æ‰€ä¸€æ ·ã€‚è¿™å°†æ›´æ–°`allowance`æ˜ å°„ï¼Œä»¥æŸ¥çœ‹å…è®¸è¯¥å¸æˆ·èŠ±è´¹å¤šå°‘ã€‚
*   å®ƒå®ç°äº†ä¸€ä¸ª`transferFrom`ï¼Œå…è®¸å¦ä¸€ä¸ªå¸æˆ·è½¬ç§»ä»¤ç‰Œã€‚

è§‚çœ‹æ­¤è§†é¢‘ï¼Œäº†è§£æˆ‘å¦‚ä½•ä¸€æ­¥ä¸€æ­¥åœ°æ„å»ºè¿™ä»½æ™ºèƒ½åˆåŒã€‚

æ‚¨è¿˜å¯ä»¥é€šè¯»è¿™ä¸ªæ™ºèƒ½å¥‘çº¦çš„æµ‹è¯•ï¼Œä»¥äº†è§£å®ƒæ˜¯å¦‚ä½•å·¥ä½œçš„ã€‚è¿™äº›æµ‹è¯•ç¡®ä¿è¿™ä¸ªæ™ºèƒ½å¥‘çº¦æŒ‰ç…§æˆ‘ä»¬é¢„æœŸçš„æ–¹å¼è¿è¡Œã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªå®Œæ•´çš„æµ‹è¯•å¥—ä»¶ï¼Œå®ƒæ£€æŸ¥æ™ºèƒ½åˆçº¦çš„æ‰€æœ‰è¡Œä¸º:

```js
var DappToken = artifacts.require("./DappToken.sol");

contract('DappToken', function(accounts) {
  var tokenInstance;

  it('initializes the contract with the correct values', function() {
    return DappToken.deployed().then(function(instance) {
      tokenInstance = instance;
      return tokenInstance.name();
    }).then(function(name) {
      assert.equal(name, 'DApp Token', 'has the correct name');
      return tokenInstance.symbol();
    }).then(function(symbol) {
      assert.equal(symbol, 'DAPP', 'has the correct symbol');
      return tokenInstance.standard();
    }).then(function(standard) {
      assert.equal(standard, 'DApp Token v1.0', 'has the correct standard');
    });
  })

  it('allocates the initial supply upon deployment', function() {
    return DappToken.deployed().then(function(instance) {
      tokenInstance = instance;
      return tokenInstance.totalSupply();
    }).then(function(totalSupply) {
      assert.equal(totalSupply.toNumber(), 1000000, 'sets the total supply to 1,000,000');
      return tokenInstance.balanceOf(accounts[0]);
    }).then(function(adminBalance) {
      assert.equal(adminBalance.toNumber(), 1000000, 'it allocates the initial supply to the admin account');
    });
  });

  it('transfers token ownership', function() {
    return DappToken.deployed().then(function(instance) {
      tokenInstance = instance;
      // Test `require` statement first by transferring something larger than the sender's balance
      return tokenInstance.transfer.call(accounts[1], 99999999999999999999999);
    }).then(assert.fail).catch(function(error) {
      assert(error.message.indexOf('revert') >= 0, 'error message must contain revert');
      return tokenInstance.transfer.call(accounts[1], 250000, { from: accounts[0] });
    }).then(function(success) {
      assert.equal(success, true, 'it returns true');
      return tokenInstance.transfer(accounts[1], 250000, { from: accounts[0] });
    }).then(function(receipt) {
      assert.equal(receipt.logs.length, 1, 'triggers one event');
      assert.equal(receipt.logs[0].event, 'Transfer', 'should be the "Transfer" event');
      assert.equal(receipt.logs[0].args._from, accounts[0], 'logs the account the tokens are transferred from');
      assert.equal(receipt.logs[0].args._to, accounts[1], 'logs the account the tokens are transferred to');
      assert.equal(receipt.logs[0].args._value, 250000, 'logs the transfer amount');
      return tokenInstance.balanceOf(accounts[1]);
    }).then(function(balance) {
      assert.equal(balance.toNumber(), 250000, 'adds the amount to the receiving account');
      return tokenInstance.balanceOf(accounts[0]);
    }).then(function(balance) {
      assert.equal(balance.toNumber(), 750000, 'deducts the amount from the sending account');
    });
  });

  it('approves tokens for delegated transfer', function() {
    return DappToken.deployed().then(function(instance) {
      tokenInstance = instance;
      return tokenInstance.approve.call(accounts[1], 100);
    }).then(function(success) {
      assert.equal(success, true, 'it returns true');
      return tokenInstance.approve(accounts[1], 100, { from: accounts[0] });
    }).then(function(receipt) {
      assert.equal(receipt.logs.length, 1, 'triggers one event');
      assert.equal(receipt.logs[0].event, 'Approval', 'should be the "Approval" event');
      assert.equal(receipt.logs[0].args._owner, accounts[0], 'logs the account the tokens are authorized by');
      assert.equal(receipt.logs[0].args._spender, accounts[1], 'logs the account the tokens are authorized to');
      assert.equal(receipt.logs[0].args._value, 100, 'logs the transfer amount');
      return tokenInstance.allowance(accounts[0], accounts[1]);
    }).then(function(allowance) {
      assert.equal(allowance.toNumber(), 100, 'stores the allowance for delegated trasnfer');
    });
  });

  it('handles delegated token transfers', function() {
    return DappToken.deployed().then(function(instance) {
      tokenInstance = instance;
      fromAccount = accounts[2];
      toAccount = accounts[3];
      spendingAccount = accounts[4];
      // Transfer some tokens to fromAccount
      return tokenInstance.transfer(fromAccount, 100, { from: accounts[0] });
    }).then(function(receipt) {
      // Approve spendingAccount to spend 10 tokens form fromAccount
      return tokenInstance.approve(spendingAccount, 10, { from: fromAccount });
    }).then(function(receipt) {
      // Try transferring something larger than the sender's balance
      return tokenInstance.transferFrom(fromAccount, toAccount, 9999, { from: spendingAccount });
    }).then(assert.fail).catch(function(error) {
      assert(error.message.indexOf('revert') >= 0, 'cannot transfer value larger than balance');
      // Try transferring something larger than the approved amount
      return tokenInstance.transferFrom(fromAccount, toAccount, 20, { from: spendingAccount });
    }).then(assert.fail).catch(function(error) {
      assert(error.message.indexOf('revert') >= 0, 'cannot transfer value larger than approved amount');
      return tokenInstance.transferFrom.call(fromAccount, toAccount, 10, { from: spendingAccount });
    }).then(function(success) {
      assert.equal(success, true);
      return tokenInstance.transferFrom(fromAccount, toAccount, 10, { from: spendingAccount });
    }).then(function(receipt) {
      assert.equal(receipt.logs.length, 1, 'triggers one event');
      assert.equal(receipt.logs[0].event, 'Transfer', 'should be the "Transfer" event');
      assert.equal(receipt.logs[0].args._from, fromAccount, 'logs the account the tokens are transferred from');
      assert.equal(receipt.logs[0].args._to, toAccount, 'logs the account the tokens are transferred to');
      assert.equal(receipt.logs[0].args._value, 10, 'logs the transfer amount');
      return tokenInstance.balanceOf(fromAccount);
    }).then(function(balance) {
      assert.equal(balance.toNumber(), 90, 'deducts the amount from the sending account');
      return tokenInstance.balanceOf(toAccount);
    }).then(function(balance) {
      assert.equal(balance.toNumber(), 10, 'adds the amount from the receiving account');
      return tokenInstance.allowance(fromAccount, spendingAccount);
    }).then(function(allowance) {
      assert.equal(allowance.toNumber(), 0, 'deducts the amount from the allowance');
    });
  });
}); 

```

æ‚¨å¯ä»¥ä½¿ç”¨ truffle ä»å‘½ä»¤è¡Œè¿è¡Œæµ‹è¯•ï¼Œå¦‚ä¸‹æ‰€ç¤º:

`$ truffle test`

## äººç¾¤é”€å”®æ™ºèƒ½åˆåŒ

è¿™éƒ¨åˆ†æ•™ç¨‹çš„è§†é¢‘ç‰‡æ®µä»[è¿™ä¸ªè§†é¢‘](https://www.youtube.com/watch?v=ycRwfHM1RBk)å¼€å§‹ã€‚ä½ å¯ä»¥ä» github [è¿™é‡Œ](https://github.com/dappuniversity/token_sale)ä¸‹è½½è¿™ä¸ªæ™ºèƒ½åˆçº¦çš„ä»£ç ã€‚

ç°åœ¨ï¼Œæˆ‘ä»¬å¯ä»¥å»ºç«‹ä¸€ä¸ªç¾¤ä½“é”€å”®æ™ºèƒ½åˆçº¦ï¼Œå…è®¸æŠ•èµ„è€…åœ¨é¦–æ¬¡ç¡¬å¸å‘è¡Œ(ICO)ä¸­è´­ä¹°ä»£å¸ã€‚ä»¥ä¸‹æ˜¯å®Œæ•´çš„ä¼—åŒ…é”€å”®æ™ºèƒ½åˆåŒå¯é æ€§ä»£ç :

```js
pragma solidity ^0.4.2;

import "./DappToken.sol";

contract DappTokenSale {
    address admin;
    DappToken public tokenContract;
    uint256 public tokenPrice;
    uint256 public tokensSold;

    event Sell(address _buyer, uint256 _amount);

    function DappTokenSale(DappToken _tokenContract, uint256 _tokenPrice) public {
        admin = msg.sender;
        tokenContract = _tokenContract;
        tokenPrice = _tokenPrice;
    }

    function multiply(uint x, uint y) internal pure returns (uint z) {
        require(y == 0 || (z = x * y) / y == x);
    }

    function buyTokens(uint256 _numberOfTokens) public payable {
        require(msg.value == multiply(_numberOfTokens, tokenPrice));
        require(tokenContract.balanceOf(this) >= _numberOfTokens);
        require(tokenContract.transfer(msg.sender, _numberOfTokens));

        tokensSold += _numberOfTokens;

        Sell(msg.sender, _numberOfTokens);
    }

    function endSale() public {
        require(msg.sender == admin);
        require(tokenContract.transfer(admin, tokenContract.balanceOf(this)));

        // Just transfer the balance to the admin
        admin.transfer(address(this).balance);
    }
}

```

è®©æˆ‘ä»¬æ¥çœ‹çœ‹è¿™ç§æ™ºèƒ½åˆåŒçš„ä½œç”¨ï¼Œä»¥åŠå®ƒå¦‚ä½•ä½œä¸ºä¸€ç§ç¾¤ä½“é”€å”®:

*   å®ƒå­˜å‚¨äº†ä¸€ä¸ªç”¨äºå¤§è§„æ¨¡é”€å”®çš„ç®¡ç†å‘˜å¸æˆ·ã€‚
*   å®ƒå¼•ç”¨äº† ERC-20 ä»¤ç‰Œæ™ºèƒ½åˆçº¦`DappToken public tokenContract`ã€‚
*   å®ƒå­˜å‚¨ä»£å¸ä»·æ ¼`uint256 public tokenPrice`ã€‚
*   å®ƒå­˜å‚¨å”®å‡ºçš„ä»£å¸æ•°é‡`uint256 public tokensSold`ã€‚
*   å®ƒå®ç°äº†ä¸€ä¸ª`sell`äº‹ä»¶ï¼Œä»¥ä¾¿æ¶ˆè´¹è€…å¯ä»¥åœ¨ä»¤ç‰Œå”®å‡ºæ—¶æ”¶åˆ°é€šçŸ¥ã€‚
*   å®ƒå®ç°äº†ä¸€ä¸ª`buyTokens`åŠŸèƒ½ï¼Œå…è®¸ç”¨æˆ·åœ¨å¤§æ‹å–ä¸­è´­ä¹°ä»£å¸ã€‚
*   å®ƒå®ç°äº†ä¸€ä¸ª`endSale`åŠŸèƒ½ï¼Œå…è®¸ç®¡ç†å‘˜ç»“æŸä¼—åŒ…é”€å”®ï¼Œå¹¶æ”¶é›†é”€å”®æœŸé—´ç­¹é›†çš„èµ„é‡‘ã€‚

è§‚çœ‹æ­¤è§†é¢‘ï¼Œäº†è§£æˆ‘å¦‚ä½•ä¸€æ­¥ä¸€æ­¥åœ°æ„å»ºè¿™ä»½æ™ºèƒ½åˆåŒã€‚

æ‚¨è¿˜å¯ä»¥é€šè¯»è¿™ä¸ªæ™ºèƒ½å¥‘çº¦çš„æµ‹è¯•ï¼Œä»¥äº†è§£å®ƒæ˜¯å¦‚ä½•å·¥ä½œçš„ã€‚è¿™äº›æµ‹è¯•ç¡®ä¿è¿™ä¸ªæ™ºèƒ½å¥‘çº¦æŒ‰ç…§æˆ‘ä»¬é¢„æœŸçš„æ–¹å¼è¿è¡Œã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªå®Œæ•´çš„æµ‹è¯•å¥—ä»¶ï¼Œå®ƒæ£€æŸ¥æ™ºèƒ½åˆçº¦çš„æ‰€æœ‰è¡Œä¸º:

```js
var DappToken = artifacts.require('./DappToken.sol');
  var DappTokenSale = artifacts.require('./DappTokenSale.sol');

  contract('DappTokenSale', function(accounts) {
    var tokenInstance;
    var tokenSaleInstance;
    var admin = accounts[0];
    var buyer = accounts[1];
    var tokenPrice = 1000000000000000; // in wei
    var tokensAvailable = 750000;
    var numberOfTokens;

    it('initializes the contract with the correct values', function() {
      return DappTokenSale.deployed().then(function(instance) {
        tokenSaleInstance = instance;
        return tokenSaleInstance.address
      }).then(function(address) {
        assert.notEqual(address, 0x0, 'has contract address');
        return tokenSaleInstance.tokenContract();
      }).then(function(address) {
        assert.notEqual(address, 0x0, 'has token contract address');
        return tokenSaleInstance.tokenPrice();
      }).then(function(price) {
        assert.equal(price, tokenPrice, 'token price is correct');
      });
    });

    it('facilitates token buying', function() {
      return DappToken.deployed().then(function(instance) {
        // Grab token instance first
        tokenInstance = instance;
        return DappTokenSale.deployed();
      }).then(function(instance) {
        // Then grab token sale instance
        tokenSaleInstance = instance;
        // Provision 75% of all tokens to the token sale
        return tokenInstance.transfer(tokenSaleInstance.address, tokensAvailable, { from: admin })
      }).then(function(receipt) {
        numberOfTokens = 10;
        return tokenSaleInstance.buyTokens(numberOfTokens, { from: buyer, value: numberOfTokens * tokenPrice })
      }).then(function(receipt) {
        assert.equal(receipt.logs.length, 1, 'triggers one event');
        assert.equal(receipt.logs[0].event, 'Sell', 'should be the "Sell" event');
        assert.equal(receipt.logs[0].args._buyer, buyer, 'logs the account that purchased the tokens');
        assert.equal(receipt.logs[0].args._amount, numberOfTokens, 'logs the number of tokens purchased');
        return tokenSaleInstance.tokensSold();
      }).then(function(amount) {
        assert.equal(amount.toNumber(), numberOfTokens, 'increments the number of tokens sold');
        return tokenInstance.balanceOf(buyer);
      }).then(function(balance) {
        assert.equal(balance.toNumber(), numberOfTokens);
        return tokenInstance.balanceOf(tokenSaleInstance.address);
      }).then(function(balance) {
        assert.equal(balance.toNumber(), tokensAvailable - numberOfTokens);
        // Try to buy tokens different from the ether value
        return tokenSaleInstance.buyTokens(numberOfTokens, { from: buyer, value: 1 });
      }).then(assert.fail).catch(function(error) {
        assert(error.message.indexOf('revert') >= 0, 'msg.value must equal number of tokens in wei');
        return tokenSaleInstance.buyTokens(800000, { from: buyer, value: numberOfTokens * tokenPrice })
      }).then(assert.fail).catch(function(error) {
        assert(error.message.indexOf('revert') >= 0, 'cannot purchase more tokens than available');
      });
    });

    it('ends token sale', function() {
      return DappToken.deployed().then(function(instance) {
        // Grab token instance first
        tokenInstance = instance;
        return DappTokenSale.deployed();
      }).then(function(instance) {
        // Then grab token sale instance
        tokenSaleInstance = instance;
        // Try to end sale from account other than the admin
        return tokenSaleInstance.endSale({ from: buyer });
      }).then(assert.fail).catch(function(error) {
        assert(error.message.indexOf('revert' >= 0, 'must be admin to end sale'));
        // End sale as admin
        return tokenSaleInstance.endSale({ from: admin });
      }).then(function(receipt) {
        return tokenInstance.balanceOf(admin);
      }).then(function(balance) {
        assert.equal(balance.toNumber(), 999990, 'returns all unsold dapp tokens to admin');
        // Check that the contract has no balance
        balance = web3.eth.getBalance(tokenSaleInstance.address)
        assert.equal(balance.toNumber(), 0);
      });
    });
  });

```

æ­å–œä½ ï¼ğŸ‰æ‚¨å·²ç»æˆåŠŸåœ°åœ¨ä»¥å¤ªåŠä¸Šå»ºç«‹äº†ä¸€ä¸ª ERC-20 ä»£å¸å’Œå¤§ä¼—é”€å”®æ™ºèƒ½åˆçº¦ï¼ä½ å¯ä»¥æŸ¥çœ‹å®Œæ•´çš„ 8 å°æ—¶è§†é¢‘æ•™ç¨‹[è¿™é‡Œ](https://www.youtube.com/watch?v=XdKv5uwEk5A)å­¦ä¹ å¦‚ä½•å»ºç«‹ä¸€ä¸ª ICO ç½‘ç«™ï¼Œä¸æ™ºèƒ½åˆçº¦å¯¹è¯å¹¶ä¿ƒè¿›ä»£å¸è´­ä¹°ã€‚å®ƒè¿˜æ·±å…¥ä»‹ç»äº†æ„å»ºæ™ºèƒ½åˆçº¦æœ¬èº«çš„åˆ†æ­¥è¯´æ˜ã€‚ä½ ä¹Ÿå¯ä»¥ä» github [è¿™é‡Œ](https://github.com/dappuniversity/token_sale)ä¸‹è½½æœ¬æ•™ç¨‹çš„å®Œæ•´æºä»£ç ã€‚

![ICO Expert](img/cb5220c5bd7be0daa36694f2a0d1f5a5.png)

#### æƒ³è¯·ä¸“å®¶ï¼Ÿ

å¦‚æœæ‚¨æœ‰å…´è¶£è˜è¯· ICO ä¸“å®¶ï¼Œæˆ‘å¯ä»¥ç”¨æˆ‘ä¹…ç»è€ƒéªŒçš„ ICO è§£å†³æ–¹æ¡ˆä¸€æ­¥ä¸€æ­¥åœ°å¼•å¯¼æ‚¨çš„é¡¹ç›®ä»â€œé›¶åˆ° ICO â€!

[Learn More](/ico-solution)

å¯¹è¿™ä¸ªæ•™ç¨‹æ»¡æ„å—ï¼Ÿç„¶åä½ **éœ€è¦**åˆ°[åœ¨è¿™é‡Œå‚åŠ æˆ‘çš„å…è´¹åŸ¹è®­](/bootcamp)ï¼Œæˆ‘å°†å‘ä½ å±•ç¤ºå¦‚ä½•æ„å»ºä¸€ä¸ªçœŸå®ä¸–ç•Œçš„åŒºå—é“¾åº”ç”¨ç¨‹åºï¼Œè¿™æ ·ä½ å°±å¯ä»¥æˆä¸ºä¸€åé«˜è–ªçš„åŒºå—é“¾å¼€å‘è€…ï¼

*
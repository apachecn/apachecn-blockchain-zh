# å¦‚ä½•åˆ›å»º NFT

> åŸæ–‡ï¼š<https://www.web3.university/tracks/build-your-first-nft/how-to-create-an-nft>

æœ¬æ•™ç¨‹å°†å¼•å¯¼æ‚¨ä½¿ç”¨ä»¥å¤ªåŠå’Œè¡Œæ˜Ÿé—´æ–‡ä»¶ç³»ç»Ÿ(IPFS)ç¼–å†™å’Œéƒ¨ç½²ä¸€ä¸ªä¸å¯æ›¿æ¢çš„(ERC721)ä»¤ç‰Œæ™ºèƒ½åˆçº¦ã€‚

*å®Œæˆæœ¬æŒ‡å—çš„é¢„è®¡æ—¶é—´:~15 åˆ†é’Ÿ*

å³ä½¿ä½ ä¸€ç›´ç”Ÿæ´»åœ¨å²©çŸ³ä¸‹ï¼Œä½ ä¹Ÿä¼šæ³¨æ„åˆ°æ¯ä¸€ä¸ªä¸»è¦çš„æ–°é—»åª’ä½“éƒ½åœ¨æŠ¥é“éåŠŸèƒ½æ€§ç¿»è¯‘çš„å…´èµ·ã€‚

éšç€ NFTs å°†åŒºå—é“¾å¸¦å…¥å…¬ä¼—è§†é‡ï¼Œç°åœ¨æ˜¯ä¸€ä¸ªåœ¨åŒºå—é“¾ä»¥å¤ªåŠä¸Šå‘å¸ƒè‡ªå·±çš„ NFT (ERC-721 ä»¤ç‰Œ)æ¥äº†è§£ç‚’ä½œçš„ç»ä½³æœºä¼šï¼

åœ¨æœ¬æ•™ç¨‹ä¸­ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ [Metamask](https://metamask.io/) ã€ [Solidity](https://docs.soliditylang.org/en/v0.8.0/) ã€ [Hardhat](https://hardhat.org/) ã€ [Pinata](https://pinata.cloud/) å’Œ [Alchemy](https://alchemy.com/?r=affiliate:68212b46-a5c5-4f4c-bc8b-73f50536fcaf) åœ¨ Goerli æµ‹è¯•ç½‘ç»œä¸Šåˆ›å»ºå’Œéƒ¨ç½²ä¸€ä¸ª ERC-721 æ™ºèƒ½åˆçº¦(å¦‚æœæ‚¨è¿˜ä¸æ˜ç™½è¿™äº›æ˜¯ä»€ä¹ˆæ„æ€ï¼Œè¯·ä¸è¦ç€æ€¥ï¼Œæˆ‘ä»¬ä¼šè§£é‡Šçš„)ã€‚

## æ­¥éª¤ 1:è¿æ¥ä»¥å¤ªåŠç½‘ç»œ

æœ‰å¾ˆå¤šæ–¹æ³•å¯ä»¥å‘ä»¥å¤ªåŠåŒºå—é“¾å‘å‡ºè¯·æ±‚ï¼Œä½†ä¸ºäº†ä½¿äº‹æƒ…å˜å¾—ç®€å•ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ä¸€ä¸ªåœ¨ [Alchemy](https://alchemy.com/?r=affiliate:68212b46-a5c5-4f4c-bc8b-73f50536fcaf) ä¸Šçš„å…è´¹å¸æˆ·ï¼Œè¿™æ˜¯ä¸€ä¸ªåŒºå—é“¾å¼€å‘è€…å¹³å°å’Œ APIï¼Œå…è®¸æˆ‘ä»¬ä¸ä»¥å¤ªåŠé“¾é€šä¿¡ï¼Œè€Œä¸å¿…è¿è¡Œæˆ‘ä»¬è‡ªå·±çš„èŠ‚ç‚¹ã€‚

åœ¨æœ¬æ•™ç¨‹ä¸­ï¼Œæˆ‘ä»¬è¿˜å°†åˆ©ç”¨ Alchemy çš„å¼€å‘äººå‘˜å·¥å…·è¿›è¡Œç›‘æ§å’Œåˆ†æï¼Œä»¥äº†è§£æˆ‘ä»¬çš„æ™ºèƒ½åˆçº¦éƒ¨ç½²ä¸­åˆ°åº•å‘ç”Ÿäº†ä»€ä¹ˆã€‚

#### å¦‚æœä½ è¿˜æ²¡æœ‰ç‚¼é‡‘æœ¯è´¦æˆ·ï¼Œä½ å¯ä»¥åœ¨è¿™é‡Œå…è´¹æ³¨å†Œã€‚

## æ­¥éª¤ 2:åˆ›å»ºä½ çš„åº”ç”¨ç¨‹åº(å’Œ API å¯†åŒ™)

åˆ›å»º Alchemy å¸æˆ·åï¼Œæ‚¨å¯ä»¥é€šè¿‡åˆ›å»ºåº”ç”¨ç¨‹åºæ¥ç”Ÿæˆ API å¯†é’¥ã€‚è¿™å°†å…è®¸æˆ‘ä»¬å‘ Goerli æµ‹è¯•ç½‘ç»œå‘å‡ºè¯·æ±‚ã€‚å¦‚æœä½ æƒ³äº†è§£æ›´å¤šå…³äºæµ‹è¯•ç½‘ç»œçš„ä¿¡æ¯ï¼Œè¯·æŸ¥çœ‹æœ¬æŒ‡å—ã€‚

1.  å°†é¼ æ ‡æ‚¬åœåœ¨å¯¼èˆªæ ä¸­çš„â€œåº”ç”¨ç¨‹åºâ€ä¸Šï¼Œç‚¹å‡»â€œåˆ›å»ºåº”ç”¨ç¨‹åºâ€,å¯¼èˆªè‡³ Alchemy Dashboard ä¸­çš„â€œåˆ›å»ºåº”ç”¨ç¨‹åºâ€é¡µé¢

![](img/409dea346c6d8f1d21a472f67ea726a3.png)

1.  ç»™ä½ çš„åº”ç”¨å‘½å(æˆ‘ä»¬é€‰æ‹©äº†â€œæˆ‘çš„ç¬¬ä¸€ä¸ª NFTï¼â€)ï¼Œæä¾›ç®€çŸ­æè¿°ï¼Œä¸ºç¯å¢ƒé€‰æ‹©â€œStagingâ€(ç”¨äºæ‚¨çš„åº”ç”¨ç¨‹åºè®°è´¦)ï¼Œä¸ºæ‚¨çš„ç½‘ç»œé€‰æ‹©â€œGoerliâ€ã€‚

![](img/ad8c9f882be6082311d83ee5f3472554.png)

1.  ç‚¹å‡»â€œåˆ›å»ºåº”ç”¨ç¨‹åºâ€å°±å¯ä»¥äº†ï¼ä½ çš„åº”ç”¨åº”è¯¥å‡ºç°åœ¨ä¸‹è¡¨ä¸­ã€‚

## ç¬¬ä¸‰æ­¥:åˆ›å»ºä¸€ä¸ªä»¥å¤ªåŠè´¦æˆ·(åœ°å€)

æˆ‘ä»¬éœ€è¦ä¸€ä¸ªä»¥å¤ªåŠè´¦æˆ·æ¥å‘é€å’Œæ¥æ”¶äº¤æ˜“ã€‚åœ¨æœ¬æ•™ç¨‹ä¸­ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ Metamaskï¼Œè¿™æ˜¯æµè§ˆå™¨ä¸­çš„ä¸€ä¸ªè™šæ‹Ÿé’±åŒ…ï¼Œç”¨äºç®¡ç†æ‚¨çš„ä»¥å¤ªåŠå¸æˆ·åœ°å€ã€‚å¦‚æœä½ æƒ³äº†è§£æ›´å¤šå…³äºä»¥å¤ªåŠäº¤æ˜“çš„å·¥ä½œåŸç†ï¼Œè¯·æŸ¥çœ‹ä»¥å¤ªåŠåŸºé‡‘ä¼šçš„é¡µé¢ã€‚

ä½ å¯ä»¥åœ¨è¿™é‡Œå…è´¹ä¸‹è½½å¹¶åˆ›å»ºä¸€ä¸ªå…ƒæ©ç è´¦æˆ·[ã€‚å½“ä½ æ­£åœ¨åˆ›å»ºä¸€ä¸ªè´¦æˆ·æ—¶ï¼Œæˆ–è€…å¦‚æœä½ å·²ç»æœ‰äº†ä¸€ä¸ªè´¦æˆ·ï¼Œè¯·ç¡®ä¿åˆ‡æ¢åˆ°å³ä¸Šè§’çš„â€œGoerli æµ‹è¯•ç½‘ç»œâ€(è¿™æ ·æˆ‘ä»¬å°±ä¸ç”¨å¤„ç†çœŸé’±äº†)ã€‚](https://metamask.io/download.html)

![](img/75392be0e0dc1109603bc9cb32392596.png)

## ä»æ°´é¾™å¤´ä¸­åŠ å…¥ Ethers

ä¸ºäº†å°†æˆ‘ä»¬çš„æ™ºèƒ½åˆåŒéƒ¨ç½²åˆ°æµ‹è¯•ç½‘ç»œï¼Œæˆ‘ä»¬éœ€è¦ä¸€äº›å‡çš„ Ethã€‚è¦è·å– Ethï¼Œæ‚¨å¯ä»¥è¿›å…¥ Goerli æ°´é¾™å¤´å¹¶è¾“å…¥æ‚¨çš„ Goerli å¸æˆ·åœ°å€ï¼Œç„¶åç‚¹å‡»â€œå‘é€ Eth ç»™æˆ‘â€ä½ åº”è¯¥å¾ˆå¿«å°±ä¼šåœ¨ä½ çš„ Metamask è´¦æˆ·ä¸­çœ‹åˆ° Ethï¼

## ç¬¬äº”æ­¥:æ£€æŸ¥ä½ çš„ä½™é¢

ä¸ºäº†å†æ¬¡æ£€æŸ¥æˆ‘ä»¬çš„ä½™é¢ï¼Œè®©æˆ‘ä»¬ä½¿ç”¨ [Alchemy çš„ composer å·¥å…·](https://composer.alchemyapi.io/?composer_state=%7B%22network%22%3A0%2C%22methodName%22%3A%22eth_getBalance%22%2C%22paramValues%22%3A%5B%22%22%2C%22latest%22%5D%7D)å‘å‡ºä¸€ä¸ª [eth_getBalance](https://docs.alchemyapi.io/alchemy/documentation/alchemy-api-reference/json-rpc#eth_getbalance) è¯·æ±‚ã€‚è¿™å°†è¿”å›æˆ‘ä»¬é’±åŒ…ä¸­ Eth çš„æ•°é‡ã€‚åœ¨æ‚¨è¾“å…¥å…ƒæ©ç å¸æˆ·åœ°å€å¹¶å•å‡»â€œå‘é€è¯·æ±‚â€åï¼Œæ‚¨åº”è¯¥ä¼šçœ‹åˆ°å¦‚ä¸‹å“åº”:

{"jsonrpc": "2.0 "ï¼Œ" id": 0ï¼Œ" result ":" 0x de 0 b 6b 3b 7640000 " }

**æ³¨:**æ­¤ç»“æœåœ¨é­æœª ethã€‚å«æ˜¯ Ethers çš„æœ€å°å•ä½ã€‚ä»å«åˆ° eth çš„æ¢ç®—æ˜¯:1 eth = 10 å«ã€‚å› æ­¤ï¼Œå¦‚æœæˆ‘ä»¬å°† 0xde0b6b3a7640000 è½¬æ¢ä¸ºåè¿›åˆ¶ï¼Œæˆ‘ä»¬ä¼šå¾—åˆ° 1*10 â¸ï¼Œç­‰äº 1 ethã€‚

å”·ï¼æˆ‘ä»¬çš„å‡é’±éƒ½åœ¨é‚£é‡Œï¼ğŸ¤‘

## æ­¥éª¤ 6:åˆå§‹åŒ–æˆ‘ä»¬çš„é¡¹ç›®

é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦ä¸ºæˆ‘ä»¬çš„é¡¹ç›®åˆ›å»ºä¸€ä¸ªæ–‡ä»¶å¤¹ã€‚å¯¼èˆªåˆ°æ‚¨çš„[å‘½ä»¤è¡Œ](https://www.computerhope.com/jargon/c/commandi.htm)å¹¶é”®å…¥:

```js
-- CODE language-js line-numbers --
mkdir my-nft
cd my-nft

```

ç°åœ¨æˆ‘ä»¬åœ¨é¡¹ç›®æ–‡ä»¶å¤¹ä¸­ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ npm init æ¥åˆå§‹åŒ–é¡¹ç›®ã€‚å¦‚æœä½ è¿˜æ²¡æœ‰å®‰è£… npmï¼Œè¯·æŒ‰ç…§è¿™äº›è¯´æ˜(æˆ‘ä»¬è¿˜éœ€è¦ [Node.js](https://nodejs.org/en/download/) ï¼Œæ‰€ä»¥ä¹Ÿä¸‹è½½å§ï¼).

```js
-- CODE language-js line-numbers --
npm init

```

å¦‚ä½•å›ç­”å®‰è£…é—®é¢˜å¹¶ä¸é‡è¦ï¼Œä»¥ä¸‹æ˜¯æˆ‘ä»¬çš„å‚è€ƒæ–¹æ³•:

```js
-- CODE language-js line-numbers --
package name: (my-nft) 
version: (1.0.0) 
description: My first NFT!
entry point: (index.js) 
test command: 
git repository: 
keywords: 
author: 
license: (ISC) 
About to write to /Users/thesuperb1/Desktop/my-nft/package.json:

{
  "name": "my-nft",
  "version": "1.0.0",
  "description": "My first NFT!",
  "main": "index.js",
  "scripts": {
    "test": "echo \"Error: no test specified\" && exit 1"
  },
  "author": "",
  "license": "ISC"
}

```

æ‰¹å‡† package.jsonï¼Œæˆ‘ä»¬å°±å¯ä»¥å¼€å§‹äº†ï¼

ç¬¬ä¸ƒæ­¥:ä¸‹è½½[å®‰å…¨å¸½](https://hardhat.org/getting-started/#overview)

Hardhat æ˜¯ä¸€ä¸ªç¼–è¯‘ã€éƒ¨ç½²ã€æµ‹è¯•å’Œè°ƒè¯•ä»¥å¤ªåŠè½¯ä»¶çš„å¼€å‘ç¯å¢ƒã€‚åœ¨éƒ¨ç½²åˆ°æ´»åŠ¨é“¾ä¹‹å‰ï¼Œå®ƒå¯ä»¥å¸®åŠ©å¼€å‘äººå‘˜åœ¨æœ¬åœ°æ„å»ºæ™ºèƒ½åˆçº¦å’Œ dAppsã€‚

å¯¼èˆªåˆ°ç»ˆç«¯å¹¶ç¡®ä¿æ‚¨åœ¨ my-nft é¡¹ç›®æ–‡ä»¶å¤¹ä¸­ï¼Œç„¶åè¿è¡Œ:

```js
-- CODE language-js line-numbers --
npm install --save-dev hardhat

```

æŸ¥çœ‹æœ¬é¡µäº†è§£æ›´å¤šå…³äº[å®‰è£…è¯´æ˜](https://hardhat.org/getting-started/#overview)çš„è¯¦ç»†ä¿¡æ¯ã€‚

## æ­¥éª¤ 8:åˆ›å»ºå®‰å…¨å¸½é¡¹ç›®

åœ¨æˆ‘ä»¬çš„é¡¹ç›®æ–‡ä»¶å¤¹ä¸­è¿è¡Œ:

```js
-- CODE language-js line-numbers --
npx hardhat

```

ç„¶åï¼Œæ‚¨åº”è¯¥ä¼šçœ‹åˆ°ä¸€æ¡æ¬¢è¿æ¶ˆæ¯å’Œä¸€ä¸ªé€‰æ‹©æ‚¨æƒ³è¦åšä»€ä¹ˆçš„é€‰é¡¹ã€‚é€‰æ‹©â€œåˆ›å»ºä¸€ä¸ªç©ºçš„ hardhat.config.jsâ€:

```
-- CODE language-js line-numbers --
888    888                      888 888               888
888    888                      888 888               888
888    888                      888 888               888
8888888888  8888b.  888d888 .d88888 88888b.   8888b.  888888
888    888     "88b 888P"  d88" 888 888 "88b     "88b 888
888    888 .d888888 888    888  888 888  888 .d888888 888
888    888 888  888 888    Y88b 888 888  888 888  888 Y88b.
888    888 "Y888888 888     "Y88888 888  888 "Y888888  "Y888
ğŸ‘· Welcome to Hardhat v2.0.11 ğŸ‘·â€
? What do you want to do? â€¦
Create a sample project
â¯ Create an empty hardhat.config.js
Quit

```js

è¿™å°†ä¸ºæˆ‘ä»¬ç”Ÿæˆä¸€ä¸ª **hardhat.config.js** æ–‡ä»¶ï¼Œæˆ‘ä»¬å°†åœ¨è¿™é‡Œä¸ºæˆ‘ä»¬çš„é¡¹ç›®æŒ‡å®šæ‰€æœ‰çš„è®¾ç½®(åœ¨æ­¥éª¤ 13)ã€‚

## æ­¥éª¤ 9:æ·»åŠ é¡¹ç›®æ–‡ä»¶å¤¹

ä¸ºäº†ä¿æŒæˆ‘ä»¬çš„é¡¹ç›®æœ‰æ¡ç†ï¼Œæˆ‘ä»¬å°†åˆ›å»ºä¸¤ä¸ªæ–°æ–‡ä»¶å¤¹ã€‚åœ¨å‘½ä»¤è¡Œä¸­å¯¼èˆªåˆ°é¡¹ç›®çš„æ ¹ç›®å½•ï¼Œç„¶åé”®å…¥:

```
-- CODE language-js line-numbers --
mkdir contracts
mkdir scripts

```js

**contracts/** æ˜¯æˆ‘ä»¬ä¿å­˜ NFT æ™ºèƒ½åˆåŒä»£ç çš„åœ°æ–¹

**scripts/** æ˜¯æˆ‘ä»¬ä¿å­˜è„šæœ¬ä»¥éƒ¨ç½²æ™ºèƒ½åˆåŒå¹¶ä¸ä¹‹äº¤äº’çš„åœ°æ–¹

## ç¬¬åæ­¥:å†™åˆåŒ

ç°åœ¨æˆ‘ä»¬çš„ç¯å¢ƒå·²ç»è®¾ç½®å¥½äº†ï¼Œæ¥ä¸‹æ¥æ˜¯æ›´ä»¤äººå…´å¥‹çš„äº‹æƒ…:ç¼–å†™æˆ‘ä»¬çš„æ™ºèƒ½å¥‘çº¦ä»£ç ï¼

åœ¨ä½ æœ€å–œæ¬¢çš„ç¼–è¾‘å™¨ä¸­æ‰“å¼€ my-nft é¡¹ç›®(æˆ‘ä»¬å–œæ¬¢ [VSCode](https://code.visualstudio.com) )ã€‚æ™ºèƒ½åˆçº¦æ˜¯ç”¨ä¸€ç§å«åš Solidity çš„è¯­è¨€ç¼–å†™çš„ï¼Œæˆ‘ä»¬å°†ç”¨å®ƒæ¥ç¼–å†™ MyNFT.sol æ™ºèƒ½åˆçº¦ã€‚â€Œ

1.å¯¼èˆªåˆ°â€œcontractsâ€æ–‡ä»¶å¤¹ï¼Œåˆ›å»ºä¸€ä¸ªåä¸º MyNFT.sol çš„æ–°æ–‡ä»¶

2.ä¸‹é¢æ˜¯æˆ‘ä»¬çš„ NFT æ™ºèƒ½åˆçº¦ä»£ç ï¼Œå®ƒåŸºäº OpenZeppelin åº“çš„ ERC721 å®ç°ã€‚å°†ä¸‹é¢çš„å†…å®¹å¤åˆ¶å¹¶ç²˜è´´åˆ° MyNFT.sol æ–‡ä»¶ä¸­ã€‚

> æ³¨:å¦‚æœä½ æƒ³é€šè¿‡æ™ºèƒ½åˆçº¦ç»™ NFT å®šä»·ï¼Œè¯·æŸ¥çœ‹æœ¬æ•™ç¨‹ã€‚

```
-- CODE language-js line-numbers --
//Contract based on https://docs.openzeppelin.com/contracts/3.x/erc721
// SPDX-License-Identifier: MIT
pragma solidity ^0.7.3;

import "@openzeppelin/contracts/token/ERC721/ERC721.sol";
import "@openzeppelin/contracts/utils/Counters.sol";
import "@openzeppelin/contracts/access/Ownable.sol";

contract MyNFT is ERC721, Ownable {
    using Counters for Counters.Counter;
    Counters.Counter private _tokenIds;

    constructor() public ERC721("MyNFT", "NFT") {}

    function mintNFT(address recipient, string memory tokenURI)
        public onlyOwner
        returns (uint256)
    {
        _tokenIds.increment();

        uint256 newItemId = _tokenIds.current();
        _mint(recipient, newItemId);
        _setTokenURI(newItemId, tokenURI);

        return newItemId;
    }
}

```js

1.å› ä¸ºæˆ‘ä»¬ä» OpenZepplin contracts åº“ç»§æ‰¿ç±»ï¼Œæ‰€ä»¥åœ¨å‘½ä»¤è¡Œä¸­è¿è¡Œä»¥ä¸‹å‘½ä»¤å°†åº“å®‰è£…åˆ°æˆ‘ä»¬çš„æ–‡ä»¶å¤¹ä¸­:

**npm install @openzeppelin/ [ã€é‚®ä»¶ä¿æŠ¤ã€‘](/cdn-cgi/l/email-protection)**

é‚£ä¹ˆï¼Œè¿™æ®µä»£ç å…·ä½“åšä»€ä¹ˆå‘¢ï¼Ÿè®©æˆ‘ä»¬ä¸€è¡Œä¸€è¡Œåœ°åˆ†è§£å®ƒã€‚

åœ¨ç¬¬ 5-7 è¡Œï¼Œæˆ‘ä»¬çš„ä»£ç ç»§æ‰¿äº†ä¸‰ä¸ª[openzeplin](https://openzeppelin.com)æ™ºèƒ½å¥‘çº¦ç±»:

-@ open zeppelin/contracts/token/ERC721/ERC 721 . sol åŒ…å« ERC 721 æ ‡å‡†çš„å®ç°ï¼Œæˆ‘ä»¬çš„ NFT æ™ºèƒ½åˆçº¦å°†ç»§æ‰¿å®ƒã€‚(è¦æˆä¸ºæœ‰æ•ˆçš„ NFTï¼Œæ‚¨çš„æ™ºèƒ½åˆçº¦å¿…é¡»å®ç° ERC721 æ ‡å‡†çš„æ‰€æœ‰æ–¹æ³•ã€‚)è¦äº†è§£å…³äºç»§æ‰¿çš„ ERC721 å‡½æ•°çš„æ›´å¤šä¿¡æ¯ï¼Œè¯·æŸ¥çœ‹è¿™é‡Œçš„æ¥å£å®šä¹‰ã€‚

-@ open zeppelin/contracts/utils/counters . sol æä¾›åªèƒ½é€’å¢æˆ–é€’å‡ 1 çš„è®¡æ•°å™¨ã€‚æˆ‘ä»¬çš„æ™ºèƒ½åˆçº¦ä½¿ç”¨ä¸€ä¸ªè®¡æ•°å™¨æ¥è·Ÿè¸ªåˆ¶é€ çš„ NFT çš„æ€»æ•°ï¼Œå¹¶ä¸ºæˆ‘ä»¬çš„æ–° NFT è®¾ç½®å”¯ä¸€çš„ IDã€‚ä½¿ç”¨æ™ºèƒ½åˆçº¦åˆ›å»ºçš„æ¯ä¸ª NFT éƒ½å¿…é¡»åˆ†é…ä¸€ä¸ªå”¯ä¸€çš„ IDï¼Œè¿™é‡Œæˆ‘ä»¬çš„å”¯ä¸€ ID åªæ˜¯ç”±ç°æœ‰çš„ NFT æ€»æ•°å†³å®šçš„ã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬ç”¨æ™ºèƒ½åˆçº¦åˆ›å»ºçš„ç¬¬ä¸€ä¸ª NFT çš„ ID ä¸ºâ€œ1â€ï¼Œç¬¬äºŒä¸ª NFT çš„ ID ä¸ºâ€œ2â€ï¼Œç­‰ç­‰ã€‚

-@ open zeppelin/contracts/access/own able . sol åœ¨æˆ‘ä»¬çš„æ™ºèƒ½åˆçº¦ä¸Šè®¾ç½®äº†[è®¿é—®æ§åˆ¶](https://docs.openzeppelin.com/contracts/3.x/access-control)ï¼Œæ‰€ä»¥åªæœ‰æ™ºèƒ½åˆçº¦çš„æ‹¥æœ‰è€…(ä½ )æ‰èƒ½é“¸é€  NFTã€‚æ³¨æ„ï¼ŒåŒ…æ‹¬è®¿é—®æ§åˆ¶å®Œå…¨æ˜¯ä¸€ç§åå¥½ã€‚å¦‚æœä½ æƒ³è®©ä»»ä½•äººéƒ½èƒ½å¤Ÿä½¿ç”¨ä½ çš„æ™ºèƒ½åˆçº¦æ¥é“¸é€  NFTï¼Œå»æ‰ç¬¬ 10 è¡Œçš„ Ownable å’Œç¬¬ 17 è¡Œçš„ onlyOwnerã€‚

åœ¨ç¬¬ 10-28 è¡Œï¼Œæˆ‘ä»¬æœ‰è‡ªå®šä¹‰çš„ NFT æ™ºèƒ½å¥‘çº¦ï¼Œå®ƒå‡ºå¥‡çš„çŸ­â€”â€”å®ƒåªåŒ…å«ä¸€ä¸ªè®¡æ•°å™¨ã€ä¸€ä¸ªæ„é€ å‡½æ•°å’Œä¸€ä¸ªå‡½æ•°ï¼è¿™è¦æ„Ÿè°¢æˆ‘ä»¬ç»§æ‰¿çš„ OpenZepplin å¥‘çº¦ï¼Œå®ƒå®ç°äº†åˆ›å»º NFT æ‰€éœ€çš„å¤§å¤šæ•°æ–¹æ³•ï¼Œä¾‹å¦‚ ownerOf(è¿”å› NFT çš„æ‰€æœ‰è€…)å’Œ transferFrom(è½¬ç§» NFT çš„æ‰€æœ‰æƒ)ã€‚

åœ¨ç¬¬ 14 è¡Œï¼Œä½ ä¼šæ³¨æ„åˆ°æˆ‘ä»¬å°†ä¸¤ä¸ªå­—ç¬¦ä¸²â€œMyNFTâ€å’Œâ€œNFTâ€ä¼ é€’ç»™äº† ERC721 æ„é€ å‡½æ•°ã€‚ç¬¬ä¸€ä¸ªå˜é‡æ˜¯æ™ºèƒ½åˆçº¦çš„åç§°ï¼Œç¬¬äºŒä¸ªå˜é‡æ˜¯å®ƒçš„ç¬¦å·ã€‚æ‚¨å¯ä»¥éšæ„å‘½åè¿™äº›å˜é‡ï¼

æœ€åï¼Œä»ç¬¬ 16 è¡Œå¼€å§‹ï¼Œæˆ‘ä»¬æœ‰ä¸€ä¸ªå‡½æ•° mintNFT()ï¼Œå®ƒå…è®¸æˆ‘ä»¬åˆ›å»ºä¸€ä¸ª NFTï¼æ‚¨ä¼šæ³¨æ„åˆ°è¿™ä¸ªå‡½æ•°æ¥å—ä¸¤ä¸ªå˜é‡:

- address recipient æŒ‡å®šæ¥æ”¶æ‚¨æ–°åˆ¶ä½œçš„ NFT çš„åœ°å€

-å­—ç¬¦ä¸²å†…å­˜ tokenURI æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œå®ƒåº”è¯¥è§£æä¸ºæè¿° NFT å…ƒæ•°æ®çš„ JSON æ–‡æ¡£ã€‚NFT çš„å…ƒæ•°æ®çœŸæ­£èµ‹äºˆäº†å®ƒç”Ÿå‘½ï¼Œå…è®¸å®ƒæ‹¥æœ‰é¢å¤–çš„å±æ€§ï¼Œå¦‚åç§°ã€æè¿°ã€å›¾åƒå’Œå…¶ä»–å±æ€§ã€‚åœ¨æœ¬æ•™ç¨‹çš„ç¬¬ 2 éƒ¨åˆ†ï¼Œæˆ‘ä»¬å°†æè¿°å¦‚ä½•é…ç½®è¿™äº›å…ƒæ•°æ®ã€‚

**mintNFT** ä»ç»§æ‰¿çš„ ERC721 åº“ä¸­è°ƒç”¨ä¸€äº›æ–¹æ³•ï¼Œæœ€ç»ˆè¿”å›ä¸€ä¸ªæ•°å­—ï¼Œè¡¨ç¤ºæ–°ç”Ÿæˆçš„ NFT çš„ IDã€‚

## æ­¥éª¤ 11:å°†å…ƒè’™ç‰ˆå’Œç‚¼é‡‘æœ¯è¿æ¥åˆ°ä½ çš„é¡¹ç›®ä¸­

ç°åœ¨ï¼Œæˆ‘ä»¬å·²ç»åˆ›å»ºäº† Metamask é’±åŒ…ã€Alchemy å¸æˆ·ï¼Œå¹¶ç¼–å†™äº†æˆ‘ä»¬çš„æ™ºèƒ½åˆåŒï¼Œæ˜¯æ—¶å€™å°†è¿™ä¸‰è€…è¿æ¥èµ·æ¥äº†ã€‚

ä»æ‚¨çš„è™šæ‹Ÿé’±åŒ…å‘é€çš„æ¯ç¬”äº¤æ˜“éƒ½éœ€è¦ä½¿ç”¨æ‚¨å”¯ä¸€çš„ç§é’¥è¿›è¡Œç­¾åã€‚ä¸ºäº†ç»™æˆ‘ä»¬çš„ç¨‹åºæä¾›è¿™ç§è®¸å¯ï¼Œæˆ‘ä»¬å¯ä»¥å®‰å…¨åœ°å°†æˆ‘ä»¬çš„ç§é’¥(å’Œ Alchemy API å¯†é’¥)å­˜å‚¨åœ¨ä¸€ä¸ªç¯å¢ƒæ–‡ä»¶ä¸­ã€‚

è¦äº†è§£æ›´å¤šå…³äºå‘é€äº‹åŠ¡çš„ä¿¡æ¯ï¼Œè¯·æŸ¥çœ‹å…³äºä½¿ç”¨ web3 å‘é€äº‹åŠ¡çš„æ•™ç¨‹ã€‚

é¦–å…ˆï¼Œåœ¨æ‚¨çš„é¡¹ç›®ç›®å½•ä¸­å®‰è£… dotenv åŒ…:

```
-- CODE language-js line-numbers --
npm install dotenv --save

```js

ç„¶åï¼Œåˆ›å»ºä¸€ä¸ª**ã€‚env** æ–‡ä»¶ï¼Œå¹¶å°†æ‚¨çš„å…ƒæ©ç ç§é’¥å’Œ HTTP Alchemy API URL æ·»åŠ åˆ°å…¶ä¸­ã€‚

æ³¨æ„:ä½ çš„ã€‚env æ–‡ä»¶å¿…é¡»å‘½åã€‚envï¼ä¸è¦å°†åç§°æ›´æ”¹ä¸º xx.env

-æŒ‰ç…§è¿™äº›è¯´æ˜ä»å…ƒæ©ç ä¸­å¯¼å‡ºæ‚¨çš„ç§é’¥

-è§ä¸‹æ–‡è·å– HTTP Alchemy API URL å¹¶å°†å…¶å¤åˆ¶åˆ°æ‚¨çš„å‰ªè´´æ¿

![](img/4752ca4dc5f23d4dea7d713cfe2fe8ea.png)

ä½ çš„**ã€‚env** åº”è¯¥æ˜¯è¿™æ ·çš„:

```
-- CODE language-js line-numbers --
API_URL = "https://eth-goerli.alchemyapi.io/v2/your-api-key"
PRIVATE_KEY = "your-metamask-private-key"

```js

## æ­¥éª¤ 12:å®‰è£… Ethers.js

Ethers.js æ˜¯ä¸€ä¸ªåº“ï¼Œé€šè¿‡ç”¨æ›´åŠ ç”¨æˆ·å‹å¥½çš„æ–¹æ³•åŒ…è£…æ ‡å‡† JSON-RPC æ–¹æ³•ï¼Œä½¿å¾—ä¸ä»¥å¤ªåŠäº¤äº’å’Œå‘ä»¥å¤ªåŠå‘å‡ºè¯·æ±‚å˜å¾—æ›´åŠ å®¹æ˜“ã€‚

Hardhat ä½¿å¾—é›†æˆ[æ’ä»¶](https://hardhat.org/plugins/)ä»¥è·å¾—é¢å¤–çš„å·¥å…·å’Œæ‰©å±•çš„åŠŸèƒ½å˜å¾—éå¸¸å®¹æ˜“ã€‚æˆ‘ä»¬å°†åˆ©ç”¨ [Ethers æ’ä»¶](https://hardhat.org/plugins/nomiclabs-hardhat-ethers.html)è¿›è¡Œå¥‘çº¦éƒ¨ç½²( [Ethers.js](https://github.com/ethers-io/ethers.js/) æœ‰ä¸€äº›è¶…çº§å¹²å‡€çš„å¥‘çº¦éƒ¨ç½²æ–¹æ³•)ã€‚

åœ¨æ‚¨çš„é¡¹ç›®ç›®å½•ä¸­é”®å…¥:

```
-- CODE language-js line-numbers --
npm install --save-dev @nomiclabs/hardhat-ethers "[emailÂ protected]^5.0.0"

```js

åœ¨ä¸‹ä¸€æ­¥ä¸­ï¼Œæˆ‘ä»¬è¿˜éœ€è¦åœ¨æˆ‘ä»¬çš„ **hardhat.config.js** ä¸­ä½¿ç”¨ ethersã€‚

## æ­¥éª¤ 13:æ›´æ–° hardhat.config.js

åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬å·²ç»æ·»åŠ äº†å‡ ä¸ªä¾èµ–é¡¹å’Œæ’ä»¶ï¼Œç°åœ¨æˆ‘ä»¬éœ€è¦æ›´æ–° **hardhat.config.js** ä»¥ä¾¿æˆ‘ä»¬çš„é¡¹ç›®çŸ¥é“æ‰€æœ‰è¿™äº›ã€‚

å°†æ‚¨çš„ **hardhat.config.js** æ›´æ–°ä¸ºå¦‚ä¸‹æ‰€ç¤º:

```
-- CODE language-js line-numbers --
/**
* @type import('hardhat/config').HardhatUserConfig
*/
require('dotenv').config();
require("@nomiclabs/hardhat-ethers");
const { API_URL, PRIVATE_KEY } = process.env;
module.exports = {
   solidity: "0.7.3",
   defaultNetwork: "goerli",
   networks: {
      hardhat: {},
      goerli: {
         url: API_URL,
         accounts: [`0x${PRIVATE_KEY}`]
      }
   },
}

```js

## ç¬¬ 14 æ­¥:ç¼–è¾‘æˆ‘ä»¬çš„åˆåŒ

ä¸ºäº†ç¡®ä¿åˆ°ç›®å‰ä¸ºæ­¢ä¸€åˆ‡æ­£å¸¸ï¼Œè®©æˆ‘ä»¬æ¥ç¼–è¾‘æˆ‘ä»¬çš„åˆåŒã€‚ç¼–è¯‘ä»»åŠ¡æ˜¯å†…ç½®çš„ hardhat ä»»åŠ¡ä¹‹ä¸€ã€‚

ä»å‘½ä»¤è¡Œè¿è¡Œ:

```
-- CODE language-js line-numbers --
npx hardhat compile

```js

æ‚¨å¯èƒ½ä¼šå¾—åˆ°ä¸€ä¸ªå…³äºæºæ–‡ä»¶ä¸­æ²¡æœ‰æä¾› SPDX è®¸å¯è¯æ ‡è¯†ç¬¦çš„è­¦å‘Šï¼Œä½†æ˜¯æ²¡æœ‰å¿…è¦æ‹…å¿ƒè¿™ä¸ªâ€”â€”å¸Œæœ›å…¶ä»–ä¸€åˆ‡çœ‹èµ·æ¥éƒ½å¾ˆå¥½ï¼å¦‚æœæ²¡æœ‰ï¼Œä½ å¯ä»¥éšæ—¶åœ¨[ç‚¼é‡‘æœ¯ä¸å’Œè°](https://discord.gg/u72VCg3)ä¸­ç•™è¨€ã€‚

## æ­¥éª¤ 15:ç¼–å†™æˆ‘ä»¬çš„éƒ¨ç½²è„šæœ¬

æ—¢ç„¶æˆ‘ä»¬çš„åˆåŒå·²ç»å†™å¥½ï¼Œé…ç½®æ–‡ä»¶ä¹Ÿå‡†å¤‡å¥½äº†ï¼Œé‚£ä¹ˆæ˜¯æ—¶å€™å†™æˆ‘ä»¬çš„åˆåŒéƒ¨ç½²è„šæœ¬äº†ã€‚

å¯¼èˆªåˆ°**è„šæœ¬/** æ–‡ä»¶å¤¹ï¼Œåˆ›å»ºä¸€ä¸ªåä¸º **deploy.js** çš„æ–°æ–‡ä»¶ï¼Œå‘å…¶ä¸­æ·»åŠ ä»¥ä¸‹å†…å®¹:

```
-- CODE language-js line-numbers --
async function main() {
   // Grab the contract factory 
   const MyNFT = await ethers.getContractFactory("MyNFT");

   // Start deployment, returning a promise that resolves to a contract object
   const myNFT = await MyNFT.deploy(); // Instance of the contract 
   console.log("Contract deployed to address:", myNFT.address);
}

main()
  .then(() => process.exit(0))
  .catch(error => {
    console.error(error);
    process.exit(1);
  });

```js

Hardhat åœ¨ä»–ä»¬çš„[åˆåŒæ•™ç¨‹](https://hardhat.org/tutorial/testing-contracts.html#writing-tests)ä¸­å¾ˆå¥½åœ°è§£é‡Šäº†æ¯ä¸€è¡Œä»£ç çš„ä½œç”¨ï¼Œæˆ‘ä»¬åœ¨è¿™é‡Œé‡‡ç”¨äº†ä»–ä»¬çš„è§£é‡Šã€‚

```
-- CODE language-js line-numbers --
const MyNFT = await ethers.getContractFactory("MyNFT");

```js

ethers.js ä¸­çš„ **ContractFactory** æ˜¯ç”¨äºéƒ¨ç½²æ–°æ™ºèƒ½åˆçº¦çš„æŠ½è±¡ï¼Œæ‰€ä»¥è¿™é‡Œçš„ MyNFT æ˜¯æˆ‘ä»¬çš„ NFT åˆçº¦å®ä¾‹çš„å·¥å‚ã€‚å½“ä½¿ç”¨**å®‰å…¨å¸½-Ethers**æ’ä»¶**åˆåŒå·¥å‚**å’Œ**åˆåŒ**å®ä¾‹æ—¶ï¼Œé»˜è®¤è¿æ¥åˆ°ç¬¬ä¸€ä¸ªç­¾åè€…ã€‚

```
-- CODE language-js line-numbers --
 const myNFT = await MyNFT.deploy();

```js

åœ¨ **ContractFactory** ä¸Šè°ƒç”¨ **deploy()** å°†å¯åŠ¨éƒ¨ç½²ï¼Œå¹¶è¿”å›è§£æä¸º**åˆåŒçš„**æ‰¿è¯º**ã€‚**è¿™ä¸ªå¯¹è±¡ä¸ºæˆ‘ä»¬çš„æ¯ä¸ªæ™ºèƒ½åˆçº¦å‡½æ•°æä¾›äº†ä¸€ä¸ªæ–¹æ³•ã€‚

## æ­¥éª¤ 16:éƒ¨ç½²æˆ‘ä»¬çš„åˆåŒ

æˆ‘ä»¬ç»ˆäºå‡†å¤‡å¥½éƒ¨ç½²æ™ºèƒ½åˆåŒäº†ï¼å¯¼èˆªå›é¡¹ç›®ç›®å½•çš„æ ¹ç›®å½•ï¼Œå¹¶åœ¨å‘½ä»¤è¡Œä¸­è¿è¡Œ:

```
-- CODE language-js line-numbers --
npx hardhat run scripts/deploy.js --network goerli

```js

ç„¶åï¼Œæ‚¨åº”è¯¥ä¼šçœ‹åˆ°ç±»ä¼¼è¿™æ ·çš„å†…å®¹:

```
-- CODE language-js line-numbers --
Contract deployed to address: 0xb8949d5685588fd73Fd002585D9f18F48c0078Fa

```

å¦‚æœæˆ‘ä»¬å» Goerli etherscan æœç´¢æˆ‘ä»¬çš„åˆåŒåœ°å€ï¼Œæˆ‘ä»¬åº”è¯¥èƒ½å¤Ÿçœ‹åˆ°å®ƒå·²ç»æˆåŠŸéƒ¨ç½²ã€‚è¯¥äº‹åŠ¡å°†ç±»ä¼¼äºä»¥ä¸‹å†…å®¹:

![](img/7879ca61b91dcc9452665c2c8c25a446.png)

**From** åœ°å€åº”è¯¥ä¸æ‚¨çš„å…ƒæ©ç å¸æˆ·åœ°å€ç›¸åŒ¹é…ï¼Œè€Œ To åœ°å€å°†æ˜¾ç¤ºâ€œåˆåŒåˆ›å»ºâ€å¦‚æœæˆ‘ä»¬ç‚¹å‡»è¿›å…¥äº¤æ˜“ï¼Œæˆ‘ä»¬å°†åœ¨**è‡³**å­—æ®µä¸­çœ‹åˆ°æˆ‘ä»¬çš„åˆåŒåœ°å€:

![](img/f3360ed9bfe46eee27b0b4148bd6ca28.png)

äºšä¸æ–¯ï¼ä½ åˆšåˆšæŠŠä½ çš„ NFT æ™ºèƒ½åˆåŒéƒ¨ç½²åˆ°ä»¥å¤ªåŠè¿é”åº—ğŸ‰

ä¸ºäº†äº†è§£å¹•åå‘ç”Ÿäº†ä»€ä¹ˆï¼Œè®©æˆ‘ä»¬å¯¼èˆªåˆ°æˆ‘ä»¬çš„[ç‚¼é‡‘æœ¯ä»ªè¡¨æ¿](https://dashboard.alchemyapi.io/signup?referral=affiliate:68212b46-a5c5-4f4c-bc8b-73f50536fcaf)ä¸­çš„ Explorer é€‰é¡¹å¡ã€‚å¦‚æœæ‚¨æœ‰å¤šä¸ª Alchemy åº”ç”¨ç¨‹åºï¼Œè¯·ç¡®ä¿æŒ‰åº”ç”¨ç¨‹åºè¿‡æ»¤å¹¶é€‰æ‹©â€œMyNFTâ€ã€‚

![](img/04d64939128960b47574689e363b06a8.png)

åœ¨è¿™é‡Œä½ ä¼šçœ‹åˆ°ä¸€äº› JSON-RPC è°ƒç”¨ï¼Œå½“æˆ‘ä»¬è°ƒç”¨**æ—¶ï¼Œå®ƒä»¬æ˜¯ç”± Hardhat/Ethers ä¸ºæˆ‘ä»¬åšçš„ã€‚deploy()** å‡½æ•°ã€‚

è¿™é‡Œè¦è°ƒç”¨çš„ä¸¤ä¸ªé‡è¦çš„å‡½æ•°æ˜¯[**eth _ sendRawTransaction**](https://docs.alchemyapi.io/alchemy/documentation/alchemy-api-reference/json-rpc#eth_sendrawtransaction)ï¼Œè¿™æ˜¯å°†æˆ‘ä»¬çš„æ™ºèƒ½å¥‘çº¦å®é™…å†™å…¥ Goerli é“¾çš„è¯·æ±‚ï¼Œä»¥åŠ[**eth _ getTransactionByHash**](https://docs.alchemyapi.io/alchemy/documentation/alchemy-api-reference/json-rpc#eth_gettransactionbyhash)ï¼Œè¿™æ˜¯åœ¨ç»™å®š Hash(å‘é€äº‹åŠ¡æ—¶çš„å…¸å‹æ¨¡å¼)çš„æƒ…å†µä¸‹è¯»å–å…³äºæˆ‘ä»¬çš„äº‹åŠ¡çš„ä¿¡æ¯çš„è¯·æ±‚ã€‚

è¦äº†è§£æ›´å¤šå…³äºå‘é€äº‹åŠ¡çš„ä¿¡æ¯ï¼Œè¯·æŸ¥çœ‹è¿™ç¯‡å…³äºä½¿ç”¨ Web3 å‘é€äº‹åŠ¡çš„æ•™ç¨‹ã€‚